<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Super (Machine) Learning | Targeted Learning with the tlverse Software Ecosystem</title>
  <meta name="description" content="An open-source and fully-reproducible electronic set of teaching materials accompanying an invited short-course on applying Targeted Learning using the tlverse software ecosystem." />
  <meta name="generator" content="bookdown 0.17.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Super (Machine) Learning | Targeted Learning with the tlverse Software Ecosystem" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://tlverse.org/csp2020-workshop/" />
  
  <meta property="og:description" content="An open-source and fully-reproducible electronic set of teaching materials accompanying an invited short-course on applying Targeted Learning using the tlverse software ecosystem." />
  <meta name="github-repo" content="tlverse/csp2020-workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Super (Machine) Learning | Targeted Learning with the tlverse Software Ecosystem" />
  
  <meta name="twitter:description" content="An open-source and fully-reproducible electronic set of teaching materials accompanying an invited short-course on applying Targeted Learning using the tlverse software ecosystem." />
  

<meta name="author" content="Mark van der Laan, Alan Hubbard, Jeremy Coyle, Nima Hejazi, Ivana Malenica, Rachael Phillips" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/logos/favicons/favicon.png" type="image/x-icon" />
<link rel="prev" href="intro.html"/>
<link rel="next" href="the-tmle-framework.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CSP 2020 tlverse software workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#important-links"><i class="fa fa-check"></i>Important links</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-workshop"><i class="fa fa-check"></i>About this workshop</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-instructors-and-authors"><i class="fa fa-check"></i>About the instructors and authors</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#mark-van-der-laan"><i class="fa fa-check"></i>Mark van der Laan</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#jeremy-coyle"><i class="fa fa-check"></i>Jeremy Coyle</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#alan-hubbard"><i class="fa fa-check"></i>Alan Hubbard</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#nima-hejazi"><i class="fa fa-check"></i>Nima Hejazi</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#ivana-malenica"><i class="fa fa-check"></i>Ivana Malenica</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#rachael-phillips"><i class="fa fa-check"></i>Rachael Phillips</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="motivation.html"><a href="motivation.html"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="1" data-path="tlverse.html"><a href="tlverse.html"><i class="fa fa-check"></i><b>1</b> Welcome to the <code>tlverse</code></a><ul>
<li class="chapter" data-level="1.1" data-path="tlverse.html"><a href="tlverse.html#learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="tlverse.html"><a href="tlverse.html#what-is-the-tlverse"><i class="fa fa-check"></i><b>1.2</b> What is the <code>tlverse</code>?</a></li>
<li class="chapter" data-level="1.3" data-path="tlverse.html"><a href="tlverse.html#tlverse-components"><i class="fa fa-check"></i><b>1.3</b> <code>tlverse</code> components</a></li>
<li class="chapter" data-level="1.4" data-path="tlverse.html"><a href="tlverse.html#installtlverse"><i class="fa fa-check"></i><b>1.4</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> The Roadmap for Targeted Learning</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#learning-objectives-1"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#introduction"><i class="fa fa-check"></i><b>2.2</b> Introduction</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#the-roadmap"><i class="fa fa-check"></i><b>2.3</b> The Roadmap</a><ul>
<li><a href="intro.html#data-as-a-random-variable-with-a-probability-distribution-o-sim-p_0">(1) Data as a random variable with a probability distribution, <span class="math inline">\(O \sim P_0\)</span></a></li>
<li><a href="intro.html#the-statistical-model-mathcalm-such-that-p_0-in-mathcalm">(2) The statistical model <span class="math inline">\(\mathcal{M}\)</span> such that <span class="math inline">\(P_0 \in \mathcal{M}\)</span></a></li>
<li><a href="intro.html#the-statistical-target-parameter-psi-and-estimand-psip_0">(3) The statistical target parameter <span class="math inline">\(\Psi\)</span> and estimand <span class="math inline">\(\Psi(P_0)\)</span></a></li>
<li><a href="intro.html#the-estimator-hatpsi-and-estimate-hatpsip_n">(4) The estimator <span class="math inline">\(\hat{\Psi}\)</span> and estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span></a></li>
<li><a href="intro.html#a-measure-of-uncertainty-for-the-estimate-hatpsip_n">(5) A measure of uncertainty for the estimate <span class="math inline">\(\hat{\Psi}(P_n)\)</span></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#summary-of-the-roadmap"><i class="fa fa-check"></i><b>2.4</b> Summary of the Roadmap</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#causal"><i class="fa fa-check"></i><b>2.5</b> Causal Target Parameters</a><ul>
<li class="chapter" data-level="2.5.1" data-path="intro.html"><a href="intro.html#the-causal-model"><i class="fa fa-check"></i><b>2.5.1</b> The Causal Model</a></li>
<li class="chapter" data-level="2.5.2" data-path="intro.html"><a href="intro.html#identifiability"><i class="fa fa-check"></i><b>2.5.2</b> Identifiability</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#the-wash-benefits-example-dataset"><i class="fa fa-check"></i><b>2.6</b> The WASH Benefits Example Dataset</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sl3.html"><a href="sl3.html"><i class="fa fa-check"></i><b>3</b> Super (Machine) Learning</a><ul>
<li class="chapter" data-level="3.1" data-path="sl3.html"><a href="sl3.html#learning-objectives-2"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="sl3.html"><a href="sl3.html#motivation-1"><i class="fa fa-check"></i><b>3.2</b> Motivation</a></li>
<li class="chapter" data-level="3.3" data-path="sl3.html"><a href="sl3.html#introduction-1"><i class="fa fa-check"></i><b>3.3</b> Introduction</a><ul>
<li class="chapter" data-level="3.3.1" data-path="sl3.html"><a href="sl3.html#background"><i class="fa fa-check"></i><b>3.3.1</b> Background</a></li>
<li class="chapter" data-level="3.3.2" data-path="sl3.html"><a href="sl3.html#super-learner-for-prediction"><i class="fa fa-check"></i><b>3.3.2</b> Super Learner for Prediction</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="sl3.html"><a href="sl3.html#sl3-microwave-dinner-implementation"><i class="fa fa-check"></i><b>3.4</b> <code>sl3</code> “Microwave Dinner” Implementation</a><ul>
<li class="chapter" data-level="" data-path="sl3.html"><a href="sl3.html#wash-benefits-study-example"><i class="fa fa-check"></i>WASH Benefits Study Example</a></li>
<li class="chapter" data-level="" data-path="sl3.html"><a href="sl3.html#load-the-necessary-libraries-and-data"><i class="fa fa-check"></i>0. Load the necessary libraries and data</a></li>
<li class="chapter" data-level="" data-path="sl3.html"><a href="sl3.html#define-the-machine-learning-task"><i class="fa fa-check"></i>1. Define the machine learning task</a></li>
<li class="chapter" data-level="" data-path="sl3.html"><a href="sl3.html#make-a-super-learner"><i class="fa fa-check"></i>2. Make a Super Learner</a></li>
<li class="chapter" data-level="" data-path="sl3.html"><a href="sl3.html#train-the-super-learner-on-the-machine-learning-task"><i class="fa fa-check"></i>3. Train the Super Learner on the machine learning task</a></li>
<li class="chapter" data-level="" data-path="sl3.html"><a href="sl3.html#obtain-predicted-values"><i class="fa fa-check"></i>4. Obtain predicted values</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="sl3.html"><a href="sl3.html#cross-validated-super-learner"><i class="fa fa-check"></i><b>3.5</b> Cross-validated Super Learner</a></li>
<li class="chapter" data-level="3.6" data-path="sl3.html"><a href="sl3.html#variable-importance-measures-with-sl3"><i class="fa fa-check"></i><b>3.6</b> Variable Importance Measures with <code>sl3</code></a></li>
<li class="chapter" data-level="3.7" data-path="sl3.html"><a href="sl3.html#exercises"><i class="fa fa-check"></i><b>3.7</b> Exercises</a><ul>
<li class="chapter" data-level="3.7.1" data-path="sl3.html"><a href="sl3.html#sl3ex1"><i class="fa fa-check"></i><b>3.7.1</b> Predicting Myocardial Infarction with <code>sl3</code></a></li>
<li class="chapter" data-level="3.7.2" data-path="sl3.html"><a href="sl3.html#sl3ex2"><i class="fa fa-check"></i><b>3.7.2</b> Predicting Recurrent Ischemic Stroke in an RCT with <code>sl3</code></a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="sl3.html"><a href="sl3.html#concluding-remarks"><i class="fa fa-check"></i><b>3.8</b> Concluding Remarks</a></li>
<li class="chapter" data-level="3.9" data-path="sl3.html"><a href="sl3.html#appendix"><i class="fa fa-check"></i><b>3.9</b> Appendix</a><ul>
<li class="chapter" data-level="3.9.1" data-path="sl3.html"><a href="sl3.html#exercise-1-solution"><i class="fa fa-check"></i><b>3.9.1</b> Exercise 1 Solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html"><i class="fa fa-check"></i><b>4</b> The TMLE Framework</a><ul>
<li class="chapter" data-level="4.1" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="4.1.1" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#substitution-estimators"><i class="fa fa-check"></i><b>4.1.1</b> Substitution Estimators</a></li>
<li class="chapter" data-level="4.1.2" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#tmle"><i class="fa fa-check"></i><b>4.1.2</b> TMLE</a></li>
<li class="chapter" data-level="4.1.3" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#inference"><i class="fa fa-check"></i><b>4.1.3</b> Inference</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#learning-objectives-3"><i class="fa fa-check"></i><b>4.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.3" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#easy-bake-example-tmle3-for-ate"><i class="fa fa-check"></i><b>4.3</b> Easy-Bake Example: <code>tmle3</code> for ATE</a><ul>
<li class="chapter" data-level="" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#load-the-data"><i class="fa fa-check"></i>0. Load the Data</a></li>
<li class="chapter" data-level="" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#define-the-variable-roles"><i class="fa fa-check"></i>1. Define the variable roles</a></li>
<li class="chapter" data-level="" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#create-a-spec-object"><i class="fa fa-check"></i>2. Create a “Spec” Object</a></li>
<li class="chapter" data-level="" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#define-the-relevant-super-learners"><i class="fa fa-check"></i>3. Define the Relevant Super Learners</a></li>
<li class="chapter" data-level="" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#fit-the-tmle"><i class="fa fa-check"></i>4. Fit the TMLE</a></li>
<li class="chapter" data-level="" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#evaluate-the-estimates"><i class="fa fa-check"></i>5. Evaluate the Estimates</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#tmle3-components"><i class="fa fa-check"></i><b>4.4</b> <code>tmle3</code> Components</a><ul>
<li class="chapter" data-level="4.4.1" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#tmle3_task"><i class="fa fa-check"></i><b>4.4.1</b> <code>tmle3_task</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#initial-likelihood"><i class="fa fa-check"></i><b>4.4.2</b> Initial Likelihood</a></li>
<li class="chapter" data-level="4.4.3" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#targeted-likelihood-updater"><i class="fa fa-check"></i><b>4.4.3</b> Targeted Likelihood (updater)</a></li>
<li class="chapter" data-level="4.4.4" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#parameter-mapping"><i class="fa fa-check"></i><b>4.4.4</b> Parameter Mapping</a></li>
<li class="chapter" data-level="4.4.5" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#putting-it-all-together"><i class="fa fa-check"></i><b>4.4.5</b> Putting it all together</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#fitting-tmle3-with-multiple-parameters"><i class="fa fa-check"></i><b>4.5</b> Fitting <code>tmle3</code> with multiple parameters</a><ul>
<li class="chapter" data-level="4.5.1" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#delta-method"><i class="fa fa-check"></i><b>4.5.1</b> Delta Method</a></li>
<li class="chapter" data-level="4.5.2" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#fit"><i class="fa fa-check"></i><b>4.5.2</b> Fit</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#stratified-effect-estimates"><i class="fa fa-check"></i><b>4.6</b> Stratified Effect Estimates</a></li>
<li class="chapter" data-level="4.7" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#exercises-1"><i class="fa fa-check"></i><b>4.7</b> Exercises</a><ul>
<li class="chapter" data-level="4.7.1" data-path="sl3.html"><a href="sl3.html#sl3ex2"><i class="fa fa-check"></i><b>4.7.1</b> Estimation of the ATE with <code>tmle3</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="sl3.html"><a href="sl3.html#sl3ex2"><i class="fa fa-check"></i><b>4.7.2</b> Estimation of Strata-Specific ATEs with <code>tmle3</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="the-tmle-framework.html"><a href="the-tmle-framework.html#summary"><i class="fa fa-check"></i><b>4.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html"><i class="fa fa-check"></i><b>5</b> Optimal Individualized Treatment Regimes</a><ul>
<li class="chapter" data-level="5.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#learning-objectives-4"><i class="fa fa-check"></i><b>5.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#introduction-to-optimal-individualized-interventions"><i class="fa fa-check"></i><b>5.2</b> Introduction to Optimal Individualized Interventions</a></li>
<li class="chapter" data-level="5.3" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#data-structure-and-notation"><i class="fa fa-check"></i><b>5.3</b> Data Structure and Notation</a></li>
<li class="chapter" data-level="5.4" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#defining-the-causal-effect-of-an-optimal-individualized-intervention"><i class="fa fa-check"></i><b>5.4</b> Defining the Causal Effect of an Optimal Individualized Intervention</a><ul>
<li class="chapter" data-level="5.4.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#why-cv-tmle"><i class="fa fa-check"></i><b>5.4.1</b> Why CV-TMLE?</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#binary-treatment"><i class="fa fa-check"></i><b>5.5</b> Binary Treatment</a><ul>
<li class="chapter" data-level="5.5.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#evaluating-the-causal-effect-of-an-optimal-itr-with-binary-treatment"><i class="fa fa-check"></i><b>5.5.1</b> Evaluating the Causal Effect of an optimal ITR with Binary Treatment</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#categorical-treatment"><i class="fa fa-check"></i><b>5.6</b> Categorical Treatment</a><ul>
<li class="chapter" data-level="5.6.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#evaluating-the-causal-effect-of-an-optimal-itr-with-categorical-treatment"><i class="fa fa-check"></i><b>5.6.1</b> Evaluating the Causal Effect of an optimal ITR with Categorical Treatment</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#extensions-to-causal-effect-of-an-oit"><i class="fa fa-check"></i><b>5.7</b> Extensions to Causal Effect of an OIT</a><ul>
<li class="chapter" data-level="5.7.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#simpler-rules"><i class="fa fa-check"></i><b>5.7.1</b> Simpler Rules</a></li>
<li class="chapter" data-level="5.7.2" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#realistic-optimal-individual-regimes"><i class="fa fa-check"></i><b>5.7.2</b> Realistic Optimal Individual Regimes</a></li>
<li class="chapter" data-level="5.7.3" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#variable-importance-analysis"><i class="fa fa-check"></i><b>5.7.3</b> Variable Importance Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#exercise"><i class="fa fa-check"></i><b>5.8</b> Exercise</a><ul>
<li class="chapter" data-level="5.8.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#real-world-data-and-tmle3mopttx"><i class="fa fa-check"></i><b>5.8.1</b> Real World Data and <code>tmle3mopttx</code></a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#summary-1"><i class="fa fa-check"></i><b>5.9</b> Summary</a><ul>
<li class="chapter" data-level="5.9.1" data-path="optimal-individualized-treatment-regimes.html"><a href="optimal-individualized-treatment-regimes.html#solutions"><i class="fa fa-check"></i><b>5.9.1</b> Solutions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html"><i class="fa fa-check"></i><b>6</b> Stochastic Treatment Regimes</a><ul>
<li class="chapter" data-level="6.1" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#learning-objectives-5"><i class="fa fa-check"></i><b>6.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#introduction-3"><i class="fa fa-check"></i><b>6.2</b> Introduction</a></li>
<li class="chapter" data-level="6.3" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#stochastic-interventions"><i class="fa fa-check"></i><b>6.3</b> Stochastic Interventions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#identifying-the-causal-effect-of-a-stochastic-intervention"><i class="fa fa-check"></i><b>6.3.1</b> Identifying the Causal Effect of a Stochastic Intervention</a></li>
<li class="chapter" data-level="6.3.2" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#interpreting-the-causal-effect-of-a-stochastic-intervention"><i class="fa fa-check"></i><b>6.3.2</b> Interpreting the Causal Effect of a Stochastic Intervention</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#estimating-the-causal-effect-of-a-stochastic-intervention-with-tmle3shift"><i class="fa fa-check"></i><b>6.4</b> Estimating the Causal Effect of a Stochastic Intervention with <code>tmle3shift</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#simulate-data-1"><i class="fa fa-check"></i><b>6.4.1</b> Simulate Data</a></li>
<li class="chapter" data-level="6.4.2" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#targeted-estimation-of-stochastic-interventions-effects"><i class="fa fa-check"></i><b>6.4.2</b> Targeted Estimation of Stochastic Interventions Effects</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#stochastic-interventions-over-a-grid-of-counterfactual-shifts"><i class="fa fa-check"></i><b>6.5</b> Stochastic Interventions over a Grid of Counterfactual Shifts</a><ul>
<li class="chapter" data-level="6.5.1" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#initializing-vimshift-through-its-tmle3_spec"><i class="fa fa-check"></i><b>6.5.1</b> Initializing <code>vimshift</code> through its <code>tmle3_Spec</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#targeted-estimation-of-stochastic-intervention-effects"><i class="fa fa-check"></i><b>6.5.2</b> Targeted Estimation of Stochastic Intervention Effects</a></li>
<li class="chapter" data-level="6.5.3" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#inference-with-marginal-structural-models"><i class="fa fa-check"></i><b>6.5.3</b> Inference with Marginal Structural Models</a></li>
<li class="chapter" data-level="6.5.4" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#directly-targeting-the-msm-parameter-beta"><i class="fa fa-check"></i><b>6.5.4</b> Directly Targeting the MSM Parameter <span class="math inline">\(\beta\)</span></a></li>
<li class="chapter" data-level="6.5.5" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#example-with-the-wash-benefits-data"><i class="fa fa-check"></i><b>6.5.5</b> Example with the WASH Benefits Data</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="stochastic-treatment-regimes.html"><a href="stochastic-treatment-regimes.html#exercises-2"><i class="fa fa-check"></i><b>6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r6.html"><a href="r6.html"><i class="fa fa-check"></i><b>7</b> A Primer on the <code>R6</code> Class System</a><ul>
<li class="chapter" data-level="7.1" data-path="r6.html"><a href="r6.html#classes-fields-and-methods"><i class="fa fa-check"></i><b>7.1</b> Classes, Fields, and Methods</a></li>
<li class="chapter" data-level="7.2" data-path="r6.html"><a href="r6.html#object-oriented-programming-python-and-r"><i class="fa fa-check"></i><b>7.2</b> Object Oriented Programming: <code>Python</code> and <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Targeted Learning with the <code>tlverse</code> Software Ecosystem</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sl3" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Super (Machine) Learning</h1>
<p><em>Rachael Phillips</em></p>
<p>Based on the <a href="https://github.com/tlverse/sl3"><code>sl3</code> <code>R</code> package</a> by <em>Jeremy
Coyle, Nima Hejazi, Ivana Malenica, and Oleg Sofrygin</em>.</p>
<p>Updated: 2020-02-19</p>
<div id="learning-objectives-2" class="section level2">
<h2><span class="header-section-number">3.1</span> Learning Objectives</h2>
<p>By the end of this chapter you will be able to:</p>
<ol style="list-style-type: decimal">
<li>Select a loss function that is appropriate for the functional parameter to be
estimated.</li>
<li>Assemble an ensemble of learners based on the properties that identify what
features they support.</li>
<li>Customize learner hyperparameters to incorporate a diversity of different
settings.</li>
<li>Select a subset of available covariates and pass only those variables to the
modeling algorithm.</li>
<li>Fit an ensemble with nested cross-validation to obtain an estimate of the
performance of the ensemble itself.</li>
<li>Obtain <code>sl3</code> variable importance metrics.</li>
<li>Interpret the discrete and continuous Super Learner fits.</li>
<li>Rationalize the need to remove bias from the Super Learner to make an optimal
bias–variance tradeoff for the parameter of interest.</li>
</ol>
</div>
<div id="motivation-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Motivation</h2>
<ul>
<li>A common task in statistical data analysis is estimator selection (e.g., for
prediction).</li>
<li>There is no universally optimal machine learning algorithm for density
estimation or prediction.</li>
<li>For some data, one needs learners that can model a complex function.</li>
<li>For others, possibly as a result of noise or insufficient sample size, a
simple, parametric model might fit best.</li>
<li>The Super Learner, an ensemble learner, solves this issue, by allowing a
combination of learners from the simplest (intercept-only) to most complex
(neural nets, random forests, SVM, etc).</li>
<li>It works by using cross-validation in a manner which guarantees that the
resulting fit will be as good as possible, given the learners provided.</li>
</ul>
</div>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">3.3</span> Introduction</h2>
<p>In <a href="intro.html#intro">Chapter 1</a>, we introduced the Roadmap for Targeted Learning as a
general template to translate real-world data applications into formal
statistical estimation problems. The first steps of this roadmap define the
<em>statistical estimation problem</em>, which establish</p>
<ol style="list-style-type: decimal">
<li>Data as a realization of a random variable, or equivalently, an outcome of a
particular experiment.</li>
<li>A statistical model, representing the true knowledge about the
data-generating experiment.</li>
<li>A translation of the scientific question, which is often causal, into a
target parameter.</li>
</ol>
<p>Note that if the target parameter is causal, step 3 also requires
establishing identifiability of the target quantity from the observed data
distribution, under possible non-testable assumptions that may not necessarily
be reasonable. Still, the target quantity does have a valid statistical
interpretation. See <a href="intro.html#causal">causal target parameters</a> for more detail on
causal models and identifiability.</p>
<p>Now that we have defined the statistical estimation problem, we are ready to
construct the TMLE; an asymptotically linear and efficient substitution
estimator of this target quantity. The first step in this estimation procedure
is an initial estimate of the data-generating distribution, or the relevant part
of this distribution that is needed to evaluate the target parameter. For this
initial estimation, we use the Super Learner <span class="citation">(van der Laan, Polley, and Hubbard <a href="#ref-vdl2007super">2007</a>)</span>.</p>
<p>The Super Learner provides an important step in creating a robust estimator. It
is a loss-function-based tool that uses cross-validation to obtain the best
prediction of our target parameter, based on a weighted average of a library of
machine learning algorithms.</p>
<p>The library of machine learning algorithms consists of functions (“learners” in
the <code>sl3</code> nomenclature) that we think might be consistent with the true
data-generating distribution (i.e. algorithms selected based on contextual
knowledge of the experiment that generated the data). Also, the library should<br />
contain a large set of “default” algorithms that may range from a simple linear
regression model to multi-step algorithms involving screening covariates,
penalizations, optimizing tuning parameters, etc.</p>
<p>The ensembling of the collection of algorithms with weights (“metalearning” in
the <code>sl3</code> nomenclature) has been shown to be adaptive and robust, even in small
samples <span class="citation">(Polley and van der Laan <a href="#ref-polley2010super">2010</a>)</span>. The Super Learner is proven to be asymptotically as
accurate as the best possible prediction algorithm in the library
<span class="citation">(van der Laan and Dudoit <a href="#ref-vdl2003unified">2003</a>; van der Vaart, Dudoit, and van der Laan <a href="#ref-van2006oracle">2006</a>)</span>.</p>
<div id="background" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Background</h3>
<p>A <em>loss function</em> <span class="math inline">\(L\)</span> is defined as a function of the observed data and a
candidate parameter value <span class="math inline">\(\psi\)</span>, which has unknown true value <span class="math inline">\(\psi_0\)</span>,
<span class="math inline">\(L(\psi)(O)\)</span>. We can estimate the loss by substituting the empirical
distribution <span class="math inline">\(P_n\)</span> for the true (but unknown) distribution of the observed data
<span class="math inline">\(P_0\)</span>. A valid loss function will have expectation (risk) that is minimized at
the true value of the parameter <span class="math inline">\(\psi_0\)</span>. For example, the conditional mean
minimizes the risk of the squared error loss. Thus, it is a valid loss function
when estimating the conditional mean.</p>
<p>The <em>discrete Super Learner</em>, or <em>cross-validation selector</em>, is the algorithm
in the library that minimizes the cross-validated empirical risk.</p>
<p>The <em>cross-validated empirical risk</em> of an algorithm is defined as the empirical
mean over a validation sample of the loss of the algorithm fitted on the
training sample, averaged across the splits of the data.</p>
<p>The <em>continuous/ensemble Super Learner</em>, often referred to as <em>Super Learner</em>
is a weighted average of the library of algorithms, where the weights are chosen
to minimize the cross-validated empirical risk of the library. Restricting the
weights to be positive and sum to one (i.e., a convex combination) has been
shown to improve upon the discrete Super Learner <span class="citation">(Polley and van der Laan <a href="#ref-polley2010super">2010</a>; van der Laan, Polley, and Hubbard <a href="#ref-vdl2007super">2007</a>)</span>. This notion of weighted combinations was introduced in
<span class="citation">Wolpert (<a href="#ref-wolpert1992stacked">1992</a>)</span> for neural networks and adapted for regressions in
<span class="citation">Breiman (<a href="#ref-breiman1996stacked">1996</a>)</span>.</p>
<p>Cross-validation is proven to be optimal for selection among estimators. This
result was established through the oracle inequality for the cross-validation
selector among a collection of candidate estimators <span class="citation">(van der Laan and Dudoit <a href="#ref-vdl2003unified">2003</a>; van der Vaart, Dudoit, and van der Laan <a href="#ref-van2006oracle">2006</a>)</span>. The only condition is that loss function is uniformly bounded,
which is guaranteed in <code>sl3</code>.</p>
<!--
The *oracle results* prove that, if the number of algorithms in the library are
polynomial in sample size, then the cross-validation selector (i.e., discrete
Super Learner) (1) is equivalent with the oracle selector asymptotically (based
on sample of size of training samples), or (2) achieves the parametric rate (log
$n/n$) for convergence with respect to the loss-based dissimilarity (risk)
between a candidate estimate $\psi$ and the true parameter value $\psi_0$.
-->
<div id="general-overview-of-the-algorithm" class="section level4">
<h4><span class="header-section-number">3.3.1.1</span> General Overview of the Algorithm</h4>
<p><strong>What is cross-validation and how does it work?</strong></p>
<p>There are many different cross-validation schemes, designed to accommodate
different study designs and data structures. The figure below shows an example
of 10-fold cross-validation.</p>
<embed src="img/misc/vs.pdf" width="    extwidth" style="display: block; margin: auto;" type="application/pdf" />
<p><strong>General step-by-step overview of the Super Learner algorithm:</strong></p>
<ul>
<li>Break up the sample evenly into <span class="math inline">\(V\)</span>-folds (say <span class="math inline">\(V\)</span>=10).</li>
<li>For each of these 10 folds, remove that portion of the sample (kept out as
validation sample) and the remaining will be used to fit learners (training
sample).</li>
<li>Fit each learner on the training sample (note, some learners will have their
own internal cross-validation procedure or other methods to select tuning
parameters).</li>
<li>For each observation in the corresponding validation sample, predict the outcome
using each of the learners, so if there are <span class="math inline">\(p\)</span> learners, then there would be
<span class="math inline">\(p\)</span> predictions.</li>
<li>Take out another validation sample and repeat until each of the <span class="math inline">\(V\)</span>-sets of data
are removed.</li>
<li>Compare the cross-validated fit of the learners across all observations based
on specified loss function (e.g., squared error, negative log-likelihood, etc.)
by calculating the corresponding average loss (risk).</li>
<li><p>Either:</p>
<ul>
<li>choose the learner with smallest risk and apply that learner to entire data
set (resulting SL fit),</li>
<li><p>do a weighted average of the learners to minimize the cross-validated risk
(construct an ensemble of learners), by</p>
<ul>
<li>re-fitting the learners on the original data set, and</li>
<li>use the weights above to get the SL fit.</li>
</ul></li>
</ul></li>
</ul>
<p>This entire procedure can be itself cross-validated to get a consistent
estimate of the future performance of the Super Learner, and we implement this
procedure later in this chapter.</p>
<embed src="img/misc/SLKaiserNew.pdf" width="   extwidth" style="display: block; margin: auto;" type="application/pdf" />
</div>
</div>
<div id="super-learner-for-prediction" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Super Learner for Prediction</h3>
<p>Say we observe a learning data set <span class="math inline">\(X_i=(Y_i,W_i)\)</span>, for <span class="math inline">\(i=1, ..., n\)</span>, where
<span class="math inline">\(Y_i\)</span> is the outcome of interest, <span class="math inline">\(W_i\)</span> is a <span class="math inline">\(p\)</span>-dimensional set of
covariates, and our objective is to estimate the function <span class="math inline">\(\psi_0(W) = E(Y|W)\)</span>.
This function can be expressed as the minimizer of the expected loss:
<span class="math inline">\(\psi_0(W) = \text{argmin}_{\psi} E[L(X,\psi(W))]\)</span>. Here, the loss function is
represented as <span class="math inline">\(L\)</span>. One example is the squared error loss, <span class="math inline">\(L: (Y-\psi(W))^2)\)</span>.</p>
<p>For prediction, one can use the cross-validated risk to empirically determine
the relative performance of the Super Learner . When we
have tested different algorithms on actual data and looked at the performance
(e.g., MSE of prediction), never does one algorithm always win. Below, we show
the results of such a study, comparing the fits of several different learners,
including the SL algorithms.</p>
<embed src="img/misc/ericSL.pdf" width="    extwidth" style="display: block; margin: auto;" type="application/pdf" />
<p>For more detail on Super Learner we refer the reader to <span class="citation">van der Laan, Polley, and Hubbard (<a href="#ref-vdl2007super">2007</a>)</span> and
<span class="citation">Polley and van der Laan (<a href="#ref-polley2010super">2010</a>)</span>. The optimality results for the cross-validation selector
among a family of algorithms were established in <span class="citation">van der Laan and Dudoit (<a href="#ref-vdl2003unified">2003</a>)</span> and extended
in <span class="citation">van der Vaart, Dudoit, and van der Laan (<a href="#ref-van2006oracle">2006</a>)</span>.</p>
</div>
</div>
<div id="sl3-microwave-dinner-implementation" class="section level2">
<h2><span class="header-section-number">3.4</span> <code>sl3</code> “Microwave Dinner” Implementation</h2>
<p>We begin by illustrating the core functionality of the Super Learner algorithm
as implemented in <code>sl3</code>. For those who are interested in the internals
of <code>sl3</code>, see this <a href="https://tlverse.org/sl3/articles/intro_sl3.html"><code>sl3</code> introductory
tutorial</a>.</p>
<p>The <code>sl3</code> implementation consists of the following steps:</p>
<ol start="0" style="list-style-type: decimal">
<li>Load the necessary libraries and data</li>
<li>Define the machine learning task</li>
<li>Make a Super Learner by creating library of base learners and a metalearner</li>
<li>Train the Super Learner on the machine learning task</li>
<li>Obtain predicted values</li>
</ol>
<div id="wash-benefits-study-example" class="section level3 unnumbered">
<h3>WASH Benefits Study Example</h3>
<p>Using the WASH data, we are interested in predicting weight-for-height z-score
<code>whz</code> using the available covariate data. Let’s begin!</p>
</div>
<div id="load-the-necessary-libraries-and-data" class="section level3 unnumbered">
<h3>0. Load the necessary libraries and data</h3>
<p>First, we will load the relevant <code>R</code> packages, set a seed, and load the data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">library</span>(data.table)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">library</span>(kableExtra)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="kw">library</span>(origami)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw">library</span>(SuperLearner)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="kw">library</span>(sl3)</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="kw">set.seed</span>(<span class="dv">7194</span>) </a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co"># my lucky seed! or is it 9174? or 4917? many lucky seeds, thanks lysdexia!</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co"># load data set and take a peek</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14">washb_data &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;https://raw.githubusercontent.com/tlverse/tlverse-data/master/wash-benefits/washb_data.csv&quot;</span>,</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">                    <span class="dt">stringsAsFactors =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="kw">head</span>(washb_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="st">  </span>kableExtra<span class="op">:::</span><span class="kw">kable_styling</span>(<span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="st">  </span><span class="kw">scroll_box</span>(<span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;300px&quot;</span>)</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
whz
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
tr
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
fracode
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
month
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
aged
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
sex
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
momage
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
momedu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
momheight
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
hfiacat
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
Nlt18
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
Ncomp
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
watmin
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
elec
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
floor
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
walls
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
roof
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_wardrobe
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_table
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_chair
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_khat
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_chouki
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_tv
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_refrig
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_bike
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_moto
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_sewmach
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
asset_mobile
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:left;">
Control
</td>
<td style="text-align:left;">
N05265
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
268
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:left;">
Primary (1-5y)
</td>
<td style="text-align:right;">
146.40
</td>
<td style="text-align:left;">
Food Secure
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.16
</td>
<td style="text-align:left;">
Control
</td>
<td style="text-align:left;">
N05265
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
286
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
Primary (1-5y)
</td>
<td style="text-align:right;">
148.75
</td>
<td style="text-align:left;">
Moderately Food Insecure
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.05
</td>
<td style="text-align:left;">
Control
</td>
<td style="text-align:left;">
N08002
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
264
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
Primary (1-5y)
</td>
<td style="text-align:right;">
152.15
</td>
<td style="text-align:left;">
Food Secure
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.26
</td>
<td style="text-align:left;">
Control
</td>
<td style="text-align:left;">
N08002
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
252
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
Primary (1-5y)
</td>
<td style="text-align:right;">
140.25
</td>
<td style="text-align:left;">
Food Secure
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.59
</td>
<td style="text-align:left;">
Control
</td>
<td style="text-align:left;">
N06531
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
336
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
Secondary (&gt;5y)
</td>
<td style="text-align:right;">
150.95
</td>
<td style="text-align:left;">
Food Secure
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.51
</td>
<td style="text-align:left;">
Control
</td>
<td style="text-align:left;">
N06531
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
304
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
Secondary (&gt;5y)
</td>
<td style="text-align:right;">
154.20
</td>
<td style="text-align:left;">
Severely Food Insecure
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="define-the-machine-learning-task" class="section level3 unnumbered">
<h3>1. Define the machine learning task</h3>
<p>To define the machine learning <strong>“task”</strong> (predict weight-for-height z-score <code>whz</code>
using the available covariate data), we need to create an <code>sl3_Task</code> object.</p>
<p>The <code>sl3_Task</code> keeps track of the roles the variables play in the
machine learning problem, the data, and any metadata (e.g., observational-level
weights, id, offset).</p>
<p>Also, if we had missing outcomes, we would need to set
<code>drop_missing_outcome = TRUE</code> when we create the task.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># specify the outcome and covariates</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">outcome &lt;-<span class="st"> &quot;whz&quot;</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">covars &lt;-<span class="st"> </span><span class="kw">colnames</span>(washb_data)[<span class="op">-</span><span class="kw">which</span>(<span class="kw">names</span>(washb_data) <span class="op">==</span><span class="st"> </span>outcome)]</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co"># create the sl3 task</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">washb_task &lt;-<span class="st"> </span><span class="kw">make_sl3_Task</span>(</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="dt">data =</span> washb_data,</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">  <span class="dt">covariates =</span> covars,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">  <span class="dt">outcome =</span> outcome</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">)</a></code></pre></div>
<pre><code>Warning in process_data(data, nodes, column_names = column_names, flag = flag, :
Missing covariate data detected: imputing covariates.</code></pre>
<p><em>This warning is important.</em> The task just imputed missing covariates for us.
Specifically, for each covariate column with missing values, <code>sl3</code> uses the
median to impute missing continuous covariates, and the mode to impute binary
and categorical covariates.</p>
<p>Also, for each covariate column with missing values, <code>sl3</code> adds an additional
column indicating whether or not the value was imputed, which is particularly
handy when the missingness in the data might be informative.</p>
<p>Also, notice that we did not specify the number of folds, or the loss function
in the task. The default cross-validation scheme is <span class="math inline">\(V\)</span>-fold, with the number of
folds <span class="math inline">\(V=10\)</span>.</p>
<p>Let’s visualize our <code>washb_task</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">washb_task</a></code></pre></div>
<pre><code>A sl3 Task with 4695 obs and these nodes:
$covariates
 [1] &quot;tr&quot;              &quot;fracode&quot;         &quot;month&quot;           &quot;aged&quot;           
 [5] &quot;sex&quot;             &quot;momage&quot;          &quot;momedu&quot;          &quot;momheight&quot;      
 [9] &quot;hfiacat&quot;         &quot;Nlt18&quot;           &quot;Ncomp&quot;           &quot;watmin&quot;         
[13] &quot;elec&quot;            &quot;floor&quot;           &quot;walls&quot;           &quot;roof&quot;           
[17] &quot;asset_wardrobe&quot;  &quot;asset_table&quot;     &quot;asset_chair&quot;     &quot;asset_khat&quot;     
[21] &quot;asset_chouki&quot;    &quot;asset_tv&quot;        &quot;asset_refrig&quot;    &quot;asset_bike&quot;     
[25] &quot;asset_moto&quot;      &quot;asset_sewmach&quot;   &quot;asset_mobile&quot;    &quot;delta_momage&quot;   
[29] &quot;delta_momheight&quot;

$outcome
[1] &quot;whz&quot;

$id
NULL

$weights
NULL

$offset
NULL</code></pre>
</div>
<div id="make-a-super-learner" class="section level3 unnumbered">
<h3>2. Make a Super Learner</h3>
<p>Now that we have defined our machine learning problem with the task, we are
ready to <strong>“make”</strong> the Super Learner. This requires specification of</p>
<ul>
<li>A library of base learning algorithms that we think might be consistent with
the true data-generating distribution.</li>
<li>A metalearner, to ensemble the base learners.</li>
</ul>
<p>We might also incorporate</p>
<ul>
<li>Feature selection, to pass only a subset of the predictors to the algorithm.</li>
<li>Hyperparameter specification, to tune base learners.</li>
</ul>
<p>Learners have properties that indicate what features they support. We may use
<code>sl3_list_properties()</code> to get a list of all properties supported by at least
one learner.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">sl3_list_properties</span>()</a></code></pre></div>
<pre><code> [1] &quot;binomial&quot;             &quot;categorical&quot;          &quot;continuous&quot;          
 [4] &quot;cv&quot;                   &quot;density&quot;              &quot;ids&quot;                 
 [7] &quot;multivariate_outcome&quot; &quot;offset&quot;               &quot;preprocessing&quot;       
[10] &quot;timeseries&quot;           &quot;weights&quot;              &quot;wrapper&quot;             </code></pre>
<p>Since we have a continuous outcome, we may identify the learners that support
this outcome type with <code>sl3_list_learners()</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">sl3_list_learners</span>(<span class="st">&quot;continuous&quot;</span>)</a></code></pre></div>
<pre><code> [1] &quot;Lrnr_arima&quot;                     &quot;Lrnr_bartMachine&quot;              
 [3] &quot;Lrnr_bilstm&quot;                    &quot;Lrnr_caret&quot;                    
 [5] &quot;Lrnr_condensier&quot;                &quot;Lrnr_dbarts&quot;                   
 [7] &quot;Lrnr_earth&quot;                     &quot;Lrnr_expSmooth&quot;                
 [9] &quot;Lrnr_gam&quot;                       &quot;Lrnr_gbm&quot;                      
[11] &quot;Lrnr_glm&quot;                       &quot;Lrnr_glm_fast&quot;                 
[13] &quot;Lrnr_glmnet&quot;                    &quot;Lrnr_grf&quot;                      
[15] &quot;Lrnr_h2o_glm&quot;                   &quot;Lrnr_h2o_grid&quot;                 
[17] &quot;Lrnr_hal9001&quot;                   &quot;Lrnr_HarmonicReg&quot;              
[19] &quot;Lrnr_lstm&quot;                      &quot;Lrnr_mean&quot;                     
[21] &quot;Lrnr_nnls&quot;                      &quot;Lrnr_optim&quot;                    
[23] &quot;Lrnr_pkg_SuperLearner&quot;          &quot;Lrnr_pkg_SuperLearner_method&quot;  
[25] &quot;Lrnr_pkg_SuperLearner_screener&quot; &quot;Lrnr_polspline&quot;                
[27] &quot;Lrnr_randomForest&quot;              &quot;Lrnr_ranger&quot;                   
[29] &quot;Lrnr_rpart&quot;                     &quot;Lrnr_rugarch&quot;                  
[31] &quot;Lrnr_screener_corP&quot;             &quot;Lrnr_screener_corRank&quot;         
[33] &quot;Lrnr_screener_randomForest&quot;     &quot;Lrnr_solnp&quot;                    
[35] &quot;Lrnr_stratified&quot;                &quot;Lrnr_svm&quot;                      
[37] &quot;Lrnr_tsDyn&quot;                     &quot;Lrnr_xgboost&quot;                  </code></pre>
<p>Now that we have an idea of some learners, we can construct them using the
<code>make_learner</code> function.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># choose base learners</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">lrnr_glm &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_glm)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">lrnr_mean &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_mean)</a></code></pre></div>
<p>We can customize learner hyperparameters to incorporate a diversity of different
settings. Documentation for the learners and their hyperparameters can be found
in the <a href="https://tlverse.org/sl3/reference/index.html#section-sl-learners"><code>sl3</code> Learners
Reference</a>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">lrnr_ranger50 &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_ranger, <span class="dt">num.trees =</span> <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">lrnr_hal_simple &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_hal9001, <span class="dt">max_degree =</span> <span class="dv">2</span>, <span class="dt">n_folds =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">lrnr_lasso &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_glmnet) <span class="co"># alpha default is 1</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">lrnr_ridge &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_glmnet, <span class="dt">alpha =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">lrnr_elasticnet &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_glmnet, <span class="dt">alpha =</span> <span class="fl">.5</span>)</a></code></pre></div>
<p>We can also include learners from the <code>SuperLearner</code> <code>R</code> package.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">lrnr_bayesglm &lt;-<span class="st"> </span>Lrnr_pkg_SuperLearner<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;SL.bayesglm&quot;</span>)</a></code></pre></div>
<p>Here is a fun trick to create customized learners over a grid of parameters.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># I like to crock pot my super learners</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">grid_params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">cost =</span> <span class="kw">c</span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">1000</span>),</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">                    <span class="dt">gamma =</span> <span class="kw">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">                    <span class="dt">kernel =</span> <span class="kw">c</span>(<span class="st">&quot;polynomial&quot;</span>, <span class="st">&quot;radial&quot;</span>, <span class="st">&quot;sigmoid&quot;</span>),</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">                    <span class="dt">degree =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">grid &lt;-<span class="st"> </span><span class="kw">expand.grid</span>(grid_params, <span class="dt">KEEP.OUT.ATTRS =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">params_default &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">nthread =</span> <span class="kw">getOption</span>(<span class="st">&quot;sl.cores.learners&quot;</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">svm_learners &lt;-<span class="st"> </span><span class="kw">apply</span>(grid, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="cf">function</span>(params_tune) {</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">  <span class="kw">do.call</span>(Lrnr_svm<span class="op">$</span>new, <span class="kw">c</span>(params_default, <span class="kw">as.list</span>(params_tune)))})</a></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">grid_params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">max_depth =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>),</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">                    <span class="dt">eta =</span> <span class="kw">c</span>(<span class="fl">0.001</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>),</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">                    <span class="dt">nrounds =</span> <span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">50</span>))</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">grid &lt;-<span class="st"> </span><span class="kw">expand.grid</span>(grid_params, <span class="dt">KEEP.OUT.ATTRS =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">params_default &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">nthread =</span> <span class="kw">getOption</span>(<span class="st">&quot;sl.cores.learners&quot;</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">xgb_learners &lt;-<span class="st"> </span><span class="kw">apply</span>(grid, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="cf">function</span>(params_tune) {</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">  <span class="kw">do.call</span>(Lrnr_xgboost<span class="op">$</span>new, <span class="kw">c</span>(params_default, <span class="kw">as.list</span>(params_tune)))})</a></code></pre></div>
<p>Did you see <code>Lrnr_caret</code> when we called <code>sl3_list_learners(c(&quot;continuous&quot;))</code>?
All we need to specify is the algorithm to use, which is passed as <code>method</code> to
<code>caret::train()</code>. The default method for parameter selection criterion with
is set to “CV” instead of the <code>caret::train()</code> default <code>boot</code>. The summary
metric to used to select the optimal model is <code>RMSE</code> for continuous outcomes
and <code>Accuracy</code> for categorical and binomial outcomes.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># I have no idea how to tune a neural net (or BART machine..) </span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">lrnr_caret_nnet &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_caret, <span class="dt">algorithm =</span> <span class="st">&quot;nnet&quot;</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">lrnr_caret_bartMachine &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_caret, <span class="dt">algorithm =</span> <span class="st">&quot;bartMachine&quot;</span>, </a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                                       <span class="dt">method =</span> <span class="st">&quot;boot&quot;</span>, <span class="dt">metric =</span> <span class="st">&quot;RMSE&quot;</span>,</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">                                       <span class="dt">tuneLength =</span> <span class="dv">10</span>)</a></code></pre></div>
<p>In order to assemble the library of learners, we need to <strong>“stack”</strong> them
together.</p>
<p>A <code>Stack</code> is a special learner and it has the same interface as all
other learners. What makes a stack special is that it combines multiple learners
by training them simultaneously, so that their predictions can be either
combined or compared.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">stack &lt;-<span class="st"> </span><span class="kw">make_learner</span>(</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">  Stack,</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">  lrnr_glm, lrnr_mean, lrnr_ridge, lrnr_lasso, xgb_learners[[<span class="dv">10</span>]]</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">)</a></code></pre></div>
<p>We can optionally select a subset of available covariates and pass only
those variables to the modeling algorithm.</p>
<p>Let’s consider screening covariates based on their <code>randomForest</code> variable
importance ranking (ordered by mean decrease in accuracy).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">screen_rf &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_screener_randomForest, <span class="dt">nVar =</span> <span class="dv">5</span>, <span class="dt">ntree =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="co"># which covariates are selected on the full data?</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3">screen_rf<span class="op">$</span><span class="kw">train</span>(washb_task)</a></code></pre></div>
<pre><code>[1] &quot;Lrnr_screener_randomForest_5_20&quot;
$selected
[1] &quot;month&quot;     &quot;aged&quot;      &quot;momage&quot;    &quot;momheight&quot; &quot;Ncomp&quot;    </code></pre>
<p>To <strong>“pipe”</strong> only the selected covariates to the modeling algorithm, we need to
make a <code>Pipeline</code>, which is a just set of learners to be fit sequentially, where
the fit from one learner is used to define the task for the next learner.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">screen_rf_pipeline &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Pipeline, screen_rf, stack)</a></code></pre></div>
<p>Now our learners will be preceded by a screening step.</p>
<p>We also consider the original <code>stack</code>, to compare how the feature selection
methods perform in comparison to the methods without feature selection.</p>
<p>Analogous to what we have seen before, we have to stack the pipeline and
original <code>stack</code> together, so we may use them as base learners in our super
learner.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">fancy_stack &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Stack, screen_rf_pipeline, stack)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="co"># we can visualize the stack</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">dt_stack &lt;-<span class="st"> </span><span class="kw">delayed_learner_train</span>(fancy_stack, washb_task)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">plot</span>(dt_stack, <span class="dt">color =</span> <span class="ot">FALSE</span>, <span class="dt">height =</span> <span class="st">&quot;400px&quot;</span>, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>)</a></code></pre></div>
<div id="htmlwidget-2a723efc343d52bc8bb8" style="width:100%;height:400px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-2a723efc343d52bc8bb8">{"x":{"nodes":{"id":["60e0fac0-52b5-11ea-aa58-42010a14004c","60e0eba2-52b5-11ea-aa58-42010a14004c","60e0607e-52b5-11ea-aa58-42010a14004c","60e05228-52b5-11ea-aa58-42010a14004c","60df2560-52b5-11ea-aa58-42010a14004c","60e0337e-52b5-11ea-aa58-42010a14004c","60df44d2-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60df85aa-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60dfa7a6-52b5-11ea-aa58-42010a14004c","60dfcdc6-52b5-11ea-aa58-42010a14004c","60dff08a-52b5-11ea-aa58-42010a14004c","60e0107e-52b5-11ea-aa58-42010a14004c","60e0dcde-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0756e-52b5-11ea-aa58-42010a14004c","60e0855e-52b5-11ea-aa58-42010a14004c","60e09562-52b5-11ea-aa58-42010a14004c","60e0a516-52b5-11ea-aa58-42010a14004c","60e0bc86-52b5-11ea-aa58-42010a14004c"],"label":["Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1"],"level":[1,2,3,4,10,5,9,6,7,8,7,7,7,7,3,4,5,5,5,5,5],"sequential":[true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false],"state":["waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready"],"group":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"]},"edges":{"from":["60df2560-52b5-11ea-aa58-42010a14004c","60df2560-52b5-11ea-aa58-42010a14004c","60df44d2-52b5-11ea-aa58-42010a14004c","60df44d2-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60df85aa-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60dfa7a6-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60dfcdc6-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60dff08a-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60e0107e-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60e0337e-52b5-11ea-aa58-42010a14004c","60e05228-52b5-11ea-aa58-42010a14004c","60e0607e-52b5-11ea-aa58-42010a14004c","60e0756e-52b5-11ea-aa58-42010a14004c","60e0855e-52b5-11ea-aa58-42010a14004c","60e09562-52b5-11ea-aa58-42010a14004c","60e0a516-52b5-11ea-aa58-42010a14004c","60e0bc86-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0dcde-52b5-11ea-aa58-42010a14004c","60e0eba2-52b5-11ea-aa58-42010a14004c"],"to":["60e05228-52b5-11ea-aa58-42010a14004c","60df44d2-52b5-11ea-aa58-42010a14004c","60e0337e-52b5-11ea-aa58-42010a14004c","60df607a-52b5-11ea-aa58-42010a14004c","60df85aa-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60dfa7a6-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60dfcdc6-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60dff08a-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60e0107e-52b5-11ea-aa58-42010a14004c","60e02384-52b5-11ea-aa58-42010a14004c","60e0337e-52b5-11ea-aa58-42010a14004c","60e05228-52b5-11ea-aa58-42010a14004c","60e0607e-52b5-11ea-aa58-42010a14004c","60e0eba2-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0cad2-52b5-11ea-aa58-42010a14004c","60e0dcde-52b5-11ea-aa58-42010a14004c","60e0eba2-52b5-11ea-aa58-42010a14004c","60e0fac0-52b5-11ea-aa58-42010a14004c"],"label":["","","","","","","","","","","","","","","","","","","","","","","","","",""]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"edges":{"arrows":"to"},"layout":{"hierarchical":{"enabled":true,"levelSeparation":500,"nodeSpacing":200,"direction":"RL"}},"groups":{"useDefaultGroups":true,"none":{"color":{"border":"black","background":"white"}}}},"groups":["none"],"width":"100%","height":"400px","idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>
<p>We will use the <a href="https://github.com/tlverse/sl3/blob/master/R/default_metalearner.R">default
metalearner</a>,
which uses <a href="https://github.com/tlverse/sl3/blob/master/R/Lrnr_solnp.R"><code>Lrnr_solnp()</code></a>
to provide fitting procedures for a pairing of <a href="https://github.com/tlverse/sl3/blob/master/R/loss_functions.R">loss
function</a> and
<a href="https://github.com/tlverse/sl3/blob/master/R/metalearners.R">metalearner
function</a>. This
default metalearner selects a loss and metalearner pairing based on the outcome
type. Note that any learner can be used as a metalearner.</p>
<p>We have made a library/stack of base learners, so we are ready to make the super
learner. The Super Learner algorithm fits a metalearner on the validation-set
predictions.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">sl &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_sl,</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">  <span class="dt">learners =</span> fancy_stack</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">)</a></code></pre></div>
<p>We can also use <code>Lrnr_cv</code> to build a Super Learner, cross-validate a stack of
learners to compare performance of the learners in the stack, or cross-validate
any single learner (see “Cross-validation” section of this <a href="https://tlverse.org/sl3/articles/intro_sl3.html"><code>sl3</code>
introductory tutorial</a>).</p>
<p>Furthermore, we can <a href="https://tlverse.org/sl3/articles/custom_lrnrs.html">Define New <code>sl3</code>
Learners</a> which can be used
in all the places you could otherwise use any other <code>sl3</code> learners, including
<code>Pipelines</code>, <code>Stacks</code>, and the Super Learner.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">dt_sl &lt;-<span class="st"> </span><span class="kw">delayed_learner_train</span>(sl, washb_task)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">plot</span>(dt_sl, <span class="dt">color =</span> <span class="ot">FALSE</span>, <span class="dt">height =</span> <span class="st">&quot;400px&quot;</span>, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>)</a></code></pre></div>
<div id="htmlwidget-09d1fe2ac9faf21f64fb" style="width:100%;height:400px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-09d1fe2ac9faf21f64fb">{"x":{"nodes":{"id":["611c75dc-52b5-11ea-aa58-42010a14004c","611c674a-52b5-11ea-aa58-42010a14004c","611c2c94-52b5-11ea-aa58-42010a14004c","611c1ec0-52b5-11ea-aa58-42010a14004c","60f64a9c-52b5-11ea-aa58-42010a14004c","60f63cc8-52b5-11ea-aa58-42010a14004c","60f5bcee-52b5-11ea-aa58-42010a14004c","60f5aeca-52b5-11ea-aa58-42010a14004c","60f4bd44-52b5-11ea-aa58-42010a14004c","60f58fa8-52b5-11ea-aa58-42010a14004c","60f4cc3a-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f4fbc4-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f51a82-52b5-11ea-aa58-42010a14004c","60f537a6-52b5-11ea-aa58-42010a14004c","60f555e2-52b5-11ea-aa58-42010a14004c","60f57374-52b5-11ea-aa58-42010a14004c","60f62c74-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f5d1e8-52b5-11ea-aa58-42010a14004c","60f5e228-52b5-11ea-aa58-42010a14004c","60f5f182-52b5-11ea-aa58-42010a14004c","60f6012c-52b5-11ea-aa58-42010a14004c","60f6109a-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","60fb7e40-52b5-11ea-aa58-42010a14004c","60fb7008-52b5-11ea-aa58-42010a14004c","60faea0c-52b5-11ea-aa58-42010a14004c","60fadbca-52b5-11ea-aa58-42010a14004c","60f9ea12-52b5-11ea-aa58-42010a14004c","60fabed8-52b5-11ea-aa58-42010a14004c","60f9f980-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60fa2784-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60fa45ca-52b5-11ea-aa58-42010a14004c","60fa642e-52b5-11ea-aa58-42010a14004c","60fa83b4-52b5-11ea-aa58-42010a14004c","60faa1b4-52b5-11ea-aa58-42010a14004c","60fb6126-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60faff42-52b5-11ea-aa58-42010a14004c","60fb105e-52b5-11ea-aa58-42010a14004c","60fb2274-52b5-11ea-aa58-42010a14004c","60fb343a-52b5-11ea-aa58-42010a14004c","60fb4484-52b5-11ea-aa58-42010a14004c","610afc94-52b5-11ea-aa58-42010a14004c","610aed94-52b5-11ea-aa58-42010a14004c","610a68e2-52b5-11ea-aa58-42010a14004c","610a59e2-52b5-11ea-aa58-42010a14004c","610969d8-52b5-11ea-aa58-42010a14004c","610a3c14-52b5-11ea-aa58-42010a14004c","610978c4-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","6109a682-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","6109c5e0-52b5-11ea-aa58-42010a14004c","6109e3e0-52b5-11ea-aa58-42010a14004c","610a01ae-52b5-11ea-aa58-42010a14004c","610a1f04-52b5-11ea-aa58-42010a14004c","610adcb4-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610a8016-52b5-11ea-aa58-42010a14004c","610a9024-52b5-11ea-aa58-42010a14004c","610aa05a-52b5-11ea-aa58-42010a14004c","610ab0ea-52b5-11ea-aa58-42010a14004c","610ac0da-52b5-11ea-aa58-42010a14004c","610d2b36-52b5-11ea-aa58-42010a14004c","610d1dc6-52b5-11ea-aa58-42010a14004c","610c9eaa-52b5-11ea-aa58-42010a14004c","610c8fc8-52b5-11ea-aa58-42010a14004c","610b9122-52b5-11ea-aa58-42010a14004c","610c6cb4-52b5-11ea-aa58-42010a14004c","610b9e88-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610bcbf6-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610bea3c-52b5-11ea-aa58-42010a14004c","610c07a6-52b5-11ea-aa58-42010a14004c","610c2c68-52b5-11ea-aa58-42010a14004c","610c4e96-52b5-11ea-aa58-42010a14004c","610d0ff2-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610cb386-52b5-11ea-aa58-42010a14004c","610cc4c0-52b5-11ea-aa58-42010a14004c","610cd4c4-52b5-11ea-aa58-42010a14004c","610ce45a-52b5-11ea-aa58-42010a14004c","610cf3dc-52b5-11ea-aa58-42010a14004c","610f6e14-52b5-11ea-aa58-42010a14004c","610f5cd0-52b5-11ea-aa58-42010a14004c","610ed198-52b5-11ea-aa58-42010a14004c","610ec324-52b5-11ea-aa58-42010a14004c","610dca46-52b5-11ea-aa58-42010a14004c","610ea4ac-52b5-11ea-aa58-42010a14004c","610dd838-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610e0704-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e250e-52b5-11ea-aa58-42010a14004c","610e4296-52b5-11ea-aa58-42010a14004c","610e612c-52b5-11ea-aa58-42010a14004c","610e8486-52b5-11ea-aa58-42010a14004c","610f4998-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610ee6d8-52b5-11ea-aa58-42010a14004c","610ef6d2-52b5-11ea-aa58-42010a14004c","610f06c2-52b5-11ea-aa58-42010a14004c","610f1680-52b5-11ea-aa58-42010a14004c","610f265c-52b5-11ea-aa58-42010a14004c","611188fc-52b5-11ea-aa58-42010a14004c","61117b82-52b5-11ea-aa58-42010a14004c","6110f84c-52b5-11ea-aa58-42010a14004c","6110ea32-52b5-11ea-aa58-42010a14004c","610ffdf2-52b5-11ea-aa58-42010a14004c","6110ccdc-52b5-11ea-aa58-42010a14004c","61100b4e-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","61103718-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","61105450-52b5-11ea-aa58-42010a14004c","61107430-52b5-11ea-aa58-42010a14004c","61109226-52b5-11ea-aa58-42010a14004c","6110aefa-52b5-11ea-aa58-42010a14004c","61116dae-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61110e18-52b5-11ea-aa58-42010a14004c","61111e1c-52b5-11ea-aa58-42010a14004c","61112e20-52b5-11ea-aa58-42010a14004c","61114144-52b5-11ea-aa58-42010a14004c","61115166-52b5-11ea-aa58-42010a14004c","61139c6e-52b5-11ea-aa58-42010a14004c","61138eb8-52b5-11ea-aa58-42010a14004c","61130fa6-52b5-11ea-aa58-42010a14004c","611301f0-52b5-11ea-aa58-42010a14004c","6112179a-52b5-11ea-aa58-42010a14004c","6112e5e4-52b5-11ea-aa58-42010a14004c","6112255a-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","611253fe-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","611271e0-52b5-11ea-aa58-42010a14004c","61128f36-52b5-11ea-aa58-42010a14004c","6112ab6a-52b5-11ea-aa58-42010a14004c","6112c80c-52b5-11ea-aa58-42010a14004c","611380e4-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","61132482-52b5-11ea-aa58-42010a14004c","611334ea-52b5-11ea-aa58-42010a14004c","6113449e-52b5-11ea-aa58-42010a14004c","611354b6-52b5-11ea-aa58-42010a14004c","611363ca-52b5-11ea-aa58-42010a14004c","6115b21a-52b5-11ea-aa58-42010a14004c","6115a2f2-52b5-11ea-aa58-42010a14004c","61151e72-52b5-11ea-aa58-42010a14004c","6115110c-52b5-11ea-aa58-42010a14004c","61142a12-52b5-11ea-aa58-42010a14004c","6114f532-52b5-11ea-aa58-42010a14004c","611437c8-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","61146356-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","61147fda-52b5-11ea-aa58-42010a14004c","61149d12-52b5-11ea-aa58-42010a14004c","6114bb26-52b5-11ea-aa58-42010a14004c","6114d94e-52b5-11ea-aa58-42010a14004c","61159082-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","611533bc-52b5-11ea-aa58-42010a14004c","6115438e-52b5-11ea-aa58-42010a14004c","611554b4-52b5-11ea-aa58-42010a14004c","611564cc-52b5-11ea-aa58-42010a14004c","61157494-52b5-11ea-aa58-42010a14004c","6117d928-52b5-11ea-aa58-42010a14004c","6117caf0-52b5-11ea-aa58-42010a14004c","61174bd4-52b5-11ea-aa58-42010a14004c","61173d92-52b5-11ea-aa58-42010a14004c","611640c2-52b5-11ea-aa58-42010a14004c","61171f7e-52b5-11ea-aa58-42010a14004c","6116521a-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","611688b6-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","6116a6ac-52b5-11ea-aa58-42010a14004c","6116c506-52b5-11ea-aa58-42010a14004c","6116e3ec-52b5-11ea-aa58-42010a14004c","61170250-52b5-11ea-aa58-42010a14004c","6117bc36-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","61176114-52b5-11ea-aa58-42010a14004c","6117712c-52b5-11ea-aa58-42010a14004c","611780f4-52b5-11ea-aa58-42010a14004c","61179062-52b5-11ea-aa58-42010a14004c","6117a020-52b5-11ea-aa58-42010a14004c","6119ec90-52b5-11ea-aa58-42010a14004c","6119de9e-52b5-11ea-aa58-42010a14004c","61196068-52b5-11ea-aa58-42010a14004c","611952bc-52b5-11ea-aa58-42010a14004c","6118694c-52b5-11ea-aa58-42010a14004c","611936a6-52b5-11ea-aa58-42010a14004c","611876bc-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","6118a466-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","6118c1bc-52b5-11ea-aa58-42010a14004c","6118defe-52b5-11ea-aa58-42010a14004c","6118fd08-52b5-11ea-aa58-42010a14004c","61191a4a-52b5-11ea-aa58-42010a14004c","6119d0d4-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","61197558-52b5-11ea-aa58-42010a14004c","611984f8-52b5-11ea-aa58-42010a14004c","61199592-52b5-11ea-aa58-42010a14004c","6119a56e-52b5-11ea-aa58-42010a14004c","6119b4be-52b5-11ea-aa58-42010a14004c","611bff76-52b5-11ea-aa58-42010a14004c","611bf1f2-52b5-11ea-aa58-42010a14004c","611b774a-52b5-11ea-aa58-42010a14004c","611b67be-52b5-11ea-aa58-42010a14004c","611a7bb0-52b5-11ea-aa58-42010a14004c","611b4b76-52b5-11ea-aa58-42010a14004c","611a89c0-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611ab4cc-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611ad29a-52b5-11ea-aa58-42010a14004c","611af072-52b5-11ea-aa58-42010a14004c","611b0f3a-52b5-11ea-aa58-42010a14004c","611b2e48-52b5-11ea-aa58-42010a14004c","611be46e-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611b8c1c-52b5-11ea-aa58-42010a14004c","611b9b8a-52b5-11ea-aa58-42010a14004c","611baa94-52b5-11ea-aa58-42010a14004c","611bba16-52b5-11ea-aa58-42010a14004c","611bc8f8-52b5-11ea-aa58-42010a14004c","611c3acc-52b5-11ea-aa58-42010a14004c","611c56c4-52b5-11ea-aa58-42010a14004c"],"label":["CV_","bundle","CV_Stack","bundle","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","bundle","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Pipeline(Lrnr_screener_randomForest_5_20->Stack)","bundle","Lrnr_screener_randomForest_5_20","Stack","chain","bundle","Lrnr_glm_TRUE","subset","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","Stack","bundle","Lrnr_glm_TRUE","Lrnr_mean","Lrnr_glmnet_NULL_deviance_10_0_100_TRUE","Lrnr_glmnet_NULL_deviance_10_1_100_TRUE","Lrnr_xgboost_20_1_4_0.1","chain","Lrnr_solnp_TRUE_TRUE_FALSE_1e-05"],"level":[1,2,5,6,7,8,9,10,16,11,15,12,13,14,13,13,13,13,9,10,11,11,11,11,11,7,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,8,9,10,11,17,12,16,13,14,15,14,14,14,14,10,11,12,12,12,12,12,4,3],"sequential":[true,true,true,true,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,true,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,false],"state":["waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting","waiting","waiting","ready","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","waiting","ready","ready","ready","ready","ready","waiting","waiting"],"group":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"]},"edges":{"from":["60f4bd44-52b5-11ea-aa58-42010a14004c","60f4bd44-52b5-11ea-aa58-42010a14004c","60f4cc3a-52b5-11ea-aa58-42010a14004c","60f4cc3a-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f4fbc4-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f51a82-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f537a6-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f555e2-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f57374-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f58fa8-52b5-11ea-aa58-42010a14004c","60f5aeca-52b5-11ea-aa58-42010a14004c","60f5bcee-52b5-11ea-aa58-42010a14004c","60f5d1e8-52b5-11ea-aa58-42010a14004c","60f5e228-52b5-11ea-aa58-42010a14004c","60f5f182-52b5-11ea-aa58-42010a14004c","60f6012c-52b5-11ea-aa58-42010a14004c","60f6109a-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f62c74-52b5-11ea-aa58-42010a14004c","60f63cc8-52b5-11ea-aa58-42010a14004c","60f64a9c-52b5-11ea-aa58-42010a14004c","60f9ea12-52b5-11ea-aa58-42010a14004c","60f9ea12-52b5-11ea-aa58-42010a14004c","60f9f980-52b5-11ea-aa58-42010a14004c","60f9f980-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60fa2784-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60fa45ca-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60fa642e-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60fa83b4-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60faa1b4-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60fabed8-52b5-11ea-aa58-42010a14004c","60fadbca-52b5-11ea-aa58-42010a14004c","60faea0c-52b5-11ea-aa58-42010a14004c","60faff42-52b5-11ea-aa58-42010a14004c","60fb105e-52b5-11ea-aa58-42010a14004c","60fb2274-52b5-11ea-aa58-42010a14004c","60fb343a-52b5-11ea-aa58-42010a14004c","60fb4484-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60fb6126-52b5-11ea-aa58-42010a14004c","60fb7008-52b5-11ea-aa58-42010a14004c","60fb7e40-52b5-11ea-aa58-42010a14004c","610969d8-52b5-11ea-aa58-42010a14004c","610969d8-52b5-11ea-aa58-42010a14004c","610978c4-52b5-11ea-aa58-42010a14004c","610978c4-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","6109a682-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","6109c5e0-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","6109e3e0-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","610a01ae-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","610a1f04-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","610a3c14-52b5-11ea-aa58-42010a14004c","610a59e2-52b5-11ea-aa58-42010a14004c","610a68e2-52b5-11ea-aa58-42010a14004c","610a8016-52b5-11ea-aa58-42010a14004c","610a9024-52b5-11ea-aa58-42010a14004c","610aa05a-52b5-11ea-aa58-42010a14004c","610ab0ea-52b5-11ea-aa58-42010a14004c","610ac0da-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610adcb4-52b5-11ea-aa58-42010a14004c","610aed94-52b5-11ea-aa58-42010a14004c","610afc94-52b5-11ea-aa58-42010a14004c","610b9122-52b5-11ea-aa58-42010a14004c","610b9122-52b5-11ea-aa58-42010a14004c","610b9e88-52b5-11ea-aa58-42010a14004c","610b9e88-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610bcbf6-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610bea3c-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610c07a6-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610c2c68-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610c4e96-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610c6cb4-52b5-11ea-aa58-42010a14004c","610c8fc8-52b5-11ea-aa58-42010a14004c","610c9eaa-52b5-11ea-aa58-42010a14004c","610cb386-52b5-11ea-aa58-42010a14004c","610cc4c0-52b5-11ea-aa58-42010a14004c","610cd4c4-52b5-11ea-aa58-42010a14004c","610ce45a-52b5-11ea-aa58-42010a14004c","610cf3dc-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610d0ff2-52b5-11ea-aa58-42010a14004c","610d1dc6-52b5-11ea-aa58-42010a14004c","610d2b36-52b5-11ea-aa58-42010a14004c","610dca46-52b5-11ea-aa58-42010a14004c","610dca46-52b5-11ea-aa58-42010a14004c","610dd838-52b5-11ea-aa58-42010a14004c","610dd838-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e0704-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e250e-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e4296-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e612c-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e8486-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610ea4ac-52b5-11ea-aa58-42010a14004c","610ec324-52b5-11ea-aa58-42010a14004c","610ed198-52b5-11ea-aa58-42010a14004c","610ee6d8-52b5-11ea-aa58-42010a14004c","610ef6d2-52b5-11ea-aa58-42010a14004c","610f06c2-52b5-11ea-aa58-42010a14004c","610f1680-52b5-11ea-aa58-42010a14004c","610f265c-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610f4998-52b5-11ea-aa58-42010a14004c","610f5cd0-52b5-11ea-aa58-42010a14004c","610f6e14-52b5-11ea-aa58-42010a14004c","610ffdf2-52b5-11ea-aa58-42010a14004c","610ffdf2-52b5-11ea-aa58-42010a14004c","61100b4e-52b5-11ea-aa58-42010a14004c","61100b4e-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","61103718-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","61105450-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","61107430-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","61109226-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","6110aefa-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","6110ccdc-52b5-11ea-aa58-42010a14004c","6110ea32-52b5-11ea-aa58-42010a14004c","6110f84c-52b5-11ea-aa58-42010a14004c","61110e18-52b5-11ea-aa58-42010a14004c","61111e1c-52b5-11ea-aa58-42010a14004c","61112e20-52b5-11ea-aa58-42010a14004c","61114144-52b5-11ea-aa58-42010a14004c","61115166-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61116dae-52b5-11ea-aa58-42010a14004c","61117b82-52b5-11ea-aa58-42010a14004c","611188fc-52b5-11ea-aa58-42010a14004c","6112179a-52b5-11ea-aa58-42010a14004c","6112179a-52b5-11ea-aa58-42010a14004c","6112255a-52b5-11ea-aa58-42010a14004c","6112255a-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","611253fe-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","611271e0-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","61128f36-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","6112ab6a-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","6112c80c-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","6112e5e4-52b5-11ea-aa58-42010a14004c","611301f0-52b5-11ea-aa58-42010a14004c","61130fa6-52b5-11ea-aa58-42010a14004c","61132482-52b5-11ea-aa58-42010a14004c","611334ea-52b5-11ea-aa58-42010a14004c","6113449e-52b5-11ea-aa58-42010a14004c","611354b6-52b5-11ea-aa58-42010a14004c","611363ca-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","611380e4-52b5-11ea-aa58-42010a14004c","61138eb8-52b5-11ea-aa58-42010a14004c","61139c6e-52b5-11ea-aa58-42010a14004c","61142a12-52b5-11ea-aa58-42010a14004c","61142a12-52b5-11ea-aa58-42010a14004c","611437c8-52b5-11ea-aa58-42010a14004c","611437c8-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","61146356-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","61147fda-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","61149d12-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","6114bb26-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","6114d94e-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","6114f532-52b5-11ea-aa58-42010a14004c","6115110c-52b5-11ea-aa58-42010a14004c","61151e72-52b5-11ea-aa58-42010a14004c","611533bc-52b5-11ea-aa58-42010a14004c","6115438e-52b5-11ea-aa58-42010a14004c","611554b4-52b5-11ea-aa58-42010a14004c","611564cc-52b5-11ea-aa58-42010a14004c","61157494-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","61159082-52b5-11ea-aa58-42010a14004c","6115a2f2-52b5-11ea-aa58-42010a14004c","6115b21a-52b5-11ea-aa58-42010a14004c","611640c2-52b5-11ea-aa58-42010a14004c","611640c2-52b5-11ea-aa58-42010a14004c","6116521a-52b5-11ea-aa58-42010a14004c","6116521a-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","611688b6-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","6116a6ac-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","6116c506-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","6116e3ec-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","61170250-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","61171f7e-52b5-11ea-aa58-42010a14004c","61173d92-52b5-11ea-aa58-42010a14004c","61174bd4-52b5-11ea-aa58-42010a14004c","61176114-52b5-11ea-aa58-42010a14004c","6117712c-52b5-11ea-aa58-42010a14004c","611780f4-52b5-11ea-aa58-42010a14004c","61179062-52b5-11ea-aa58-42010a14004c","6117a020-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","6117bc36-52b5-11ea-aa58-42010a14004c","6117caf0-52b5-11ea-aa58-42010a14004c","6117d928-52b5-11ea-aa58-42010a14004c","6118694c-52b5-11ea-aa58-42010a14004c","6118694c-52b5-11ea-aa58-42010a14004c","611876bc-52b5-11ea-aa58-42010a14004c","611876bc-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","6118a466-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","6118c1bc-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","6118defe-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","6118fd08-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","61191a4a-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","611936a6-52b5-11ea-aa58-42010a14004c","611952bc-52b5-11ea-aa58-42010a14004c","61196068-52b5-11ea-aa58-42010a14004c","61197558-52b5-11ea-aa58-42010a14004c","611984f8-52b5-11ea-aa58-42010a14004c","61199592-52b5-11ea-aa58-42010a14004c","6119a56e-52b5-11ea-aa58-42010a14004c","6119b4be-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","6119d0d4-52b5-11ea-aa58-42010a14004c","6119de9e-52b5-11ea-aa58-42010a14004c","6119ec90-52b5-11ea-aa58-42010a14004c","611a7bb0-52b5-11ea-aa58-42010a14004c","611a7bb0-52b5-11ea-aa58-42010a14004c","611a89c0-52b5-11ea-aa58-42010a14004c","611a89c0-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611ab4cc-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611ad29a-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611af072-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611b0f3a-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611b2e48-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611b4b76-52b5-11ea-aa58-42010a14004c","611b67be-52b5-11ea-aa58-42010a14004c","611b774a-52b5-11ea-aa58-42010a14004c","611b8c1c-52b5-11ea-aa58-42010a14004c","611b9b8a-52b5-11ea-aa58-42010a14004c","611baa94-52b5-11ea-aa58-42010a14004c","611bba16-52b5-11ea-aa58-42010a14004c","611bc8f8-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611be46e-52b5-11ea-aa58-42010a14004c","611bf1f2-52b5-11ea-aa58-42010a14004c","611bff76-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","611c1ec0-52b5-11ea-aa58-42010a14004c","611c2c94-52b5-11ea-aa58-42010a14004c","611c2c94-52b5-11ea-aa58-42010a14004c","611c3acc-52b5-11ea-aa58-42010a14004c","611c3acc-52b5-11ea-aa58-42010a14004c","611c56c4-52b5-11ea-aa58-42010a14004c","611c674a-52b5-11ea-aa58-42010a14004c"],"to":["60f5aeca-52b5-11ea-aa58-42010a14004c","60f4cc3a-52b5-11ea-aa58-42010a14004c","60f58fa8-52b5-11ea-aa58-42010a14004c","60f4dbd0-52b5-11ea-aa58-42010a14004c","60f4fbc4-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f51a82-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f537a6-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f555e2-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f57374-52b5-11ea-aa58-42010a14004c","60f580da-52b5-11ea-aa58-42010a14004c","60f58fa8-52b5-11ea-aa58-42010a14004c","60f5aeca-52b5-11ea-aa58-42010a14004c","60f5bcee-52b5-11ea-aa58-42010a14004c","60f63cc8-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f61d88-52b5-11ea-aa58-42010a14004c","60f62c74-52b5-11ea-aa58-42010a14004c","60f63cc8-52b5-11ea-aa58-42010a14004c","60f64a9c-52b5-11ea-aa58-42010a14004c","611c1ec0-52b5-11ea-aa58-42010a14004c","60fadbca-52b5-11ea-aa58-42010a14004c","60f9f980-52b5-11ea-aa58-42010a14004c","60fabed8-52b5-11ea-aa58-42010a14004c","60fa0916-52b5-11ea-aa58-42010a14004c","60fa2784-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60fa45ca-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60fa642e-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60fa83b4-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60faa1b4-52b5-11ea-aa58-42010a14004c","60faafba-52b5-11ea-aa58-42010a14004c","60fabed8-52b5-11ea-aa58-42010a14004c","60fadbca-52b5-11ea-aa58-42010a14004c","60faea0c-52b5-11ea-aa58-42010a14004c","60fb7008-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60fb519a-52b5-11ea-aa58-42010a14004c","60fb6126-52b5-11ea-aa58-42010a14004c","60fb7008-52b5-11ea-aa58-42010a14004c","60fb7e40-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","610a59e2-52b5-11ea-aa58-42010a14004c","610978c4-52b5-11ea-aa58-42010a14004c","610a3c14-52b5-11ea-aa58-42010a14004c","61098922-52b5-11ea-aa58-42010a14004c","6109a682-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","6109c5e0-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","6109e3e0-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","610a01ae-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","610a1f04-52b5-11ea-aa58-42010a14004c","610a2d96-52b5-11ea-aa58-42010a14004c","610a3c14-52b5-11ea-aa58-42010a14004c","610a59e2-52b5-11ea-aa58-42010a14004c","610a68e2-52b5-11ea-aa58-42010a14004c","610aed94-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610acdfa-52b5-11ea-aa58-42010a14004c","610adcb4-52b5-11ea-aa58-42010a14004c","610aed94-52b5-11ea-aa58-42010a14004c","610afc94-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","610c8fc8-52b5-11ea-aa58-42010a14004c","610b9e88-52b5-11ea-aa58-42010a14004c","610c6cb4-52b5-11ea-aa58-42010a14004c","610bae64-52b5-11ea-aa58-42010a14004c","610bcbf6-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610bea3c-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610c07a6-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610c2c68-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610c4e96-52b5-11ea-aa58-42010a14004c","610c5cd8-52b5-11ea-aa58-42010a14004c","610c6cb4-52b5-11ea-aa58-42010a14004c","610c8fc8-52b5-11ea-aa58-42010a14004c","610c9eaa-52b5-11ea-aa58-42010a14004c","610d1dc6-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610d00ac-52b5-11ea-aa58-42010a14004c","610d0ff2-52b5-11ea-aa58-42010a14004c","610d1dc6-52b5-11ea-aa58-42010a14004c","610d2b36-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","610ec324-52b5-11ea-aa58-42010a14004c","610dd838-52b5-11ea-aa58-42010a14004c","610ea4ac-52b5-11ea-aa58-42010a14004c","610de738-52b5-11ea-aa58-42010a14004c","610e0704-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610e250e-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610e4296-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610e612c-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610e8486-52b5-11ea-aa58-42010a14004c","610e9322-52b5-11ea-aa58-42010a14004c","610ea4ac-52b5-11ea-aa58-42010a14004c","610ec324-52b5-11ea-aa58-42010a14004c","610ed198-52b5-11ea-aa58-42010a14004c","610f5cd0-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610f3548-52b5-11ea-aa58-42010a14004c","610f4998-52b5-11ea-aa58-42010a14004c","610f5cd0-52b5-11ea-aa58-42010a14004c","610f6e14-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","6110ea32-52b5-11ea-aa58-42010a14004c","61100b4e-52b5-11ea-aa58-42010a14004c","6110ccdc-52b5-11ea-aa58-42010a14004c","61101a80-52b5-11ea-aa58-42010a14004c","61103718-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","61105450-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","61107430-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","61109226-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","6110aefa-52b5-11ea-aa58-42010a14004c","6110bd32-52b5-11ea-aa58-42010a14004c","6110ccdc-52b5-11ea-aa58-42010a14004c","6110ea32-52b5-11ea-aa58-42010a14004c","6110f84c-52b5-11ea-aa58-42010a14004c","61117b82-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61115e7c-52b5-11ea-aa58-42010a14004c","61116dae-52b5-11ea-aa58-42010a14004c","61117b82-52b5-11ea-aa58-42010a14004c","611188fc-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","611301f0-52b5-11ea-aa58-42010a14004c","6112255a-52b5-11ea-aa58-42010a14004c","6112e5e4-52b5-11ea-aa58-42010a14004c","611233d8-52b5-11ea-aa58-42010a14004c","611253fe-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","611271e0-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","61128f36-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","6112ab6a-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","6112c80c-52b5-11ea-aa58-42010a14004c","6112d554-52b5-11ea-aa58-42010a14004c","6112e5e4-52b5-11ea-aa58-42010a14004c","611301f0-52b5-11ea-aa58-42010a14004c","61130fa6-52b5-11ea-aa58-42010a14004c","61138eb8-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","61137086-52b5-11ea-aa58-42010a14004c","611380e4-52b5-11ea-aa58-42010a14004c","61138eb8-52b5-11ea-aa58-42010a14004c","61139c6e-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","6115110c-52b5-11ea-aa58-42010a14004c","611437c8-52b5-11ea-aa58-42010a14004c","6114f532-52b5-11ea-aa58-42010a14004c","611446aa-52b5-11ea-aa58-42010a14004c","61146356-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","61147fda-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","61149d12-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","6114bb26-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","6114d94e-52b5-11ea-aa58-42010a14004c","6114e70e-52b5-11ea-aa58-42010a14004c","6114f532-52b5-11ea-aa58-42010a14004c","6115110c-52b5-11ea-aa58-42010a14004c","61151e72-52b5-11ea-aa58-42010a14004c","6115a2f2-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","6115816e-52b5-11ea-aa58-42010a14004c","61159082-52b5-11ea-aa58-42010a14004c","6115a2f2-52b5-11ea-aa58-42010a14004c","6115b21a-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","61173d92-52b5-11ea-aa58-42010a14004c","6116521a-52b5-11ea-aa58-42010a14004c","61171f7e-52b5-11ea-aa58-42010a14004c","6116671e-52b5-11ea-aa58-42010a14004c","611688b6-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","6116a6ac-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","6116c506-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","6116e3ec-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","61170250-52b5-11ea-aa58-42010a14004c","6117109c-52b5-11ea-aa58-42010a14004c","61171f7e-52b5-11ea-aa58-42010a14004c","61173d92-52b5-11ea-aa58-42010a14004c","61174bd4-52b5-11ea-aa58-42010a14004c","6117caf0-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","6117ad54-52b5-11ea-aa58-42010a14004c","6117bc36-52b5-11ea-aa58-42010a14004c","6117caf0-52b5-11ea-aa58-42010a14004c","6117d928-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","611952bc-52b5-11ea-aa58-42010a14004c","611876bc-52b5-11ea-aa58-42010a14004c","611936a6-52b5-11ea-aa58-42010a14004c","61188634-52b5-11ea-aa58-42010a14004c","6118a466-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","6118c1bc-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","6118defe-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","6118fd08-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","61191a4a-52b5-11ea-aa58-42010a14004c","61192800-52b5-11ea-aa58-42010a14004c","611936a6-52b5-11ea-aa58-42010a14004c","611952bc-52b5-11ea-aa58-42010a14004c","61196068-52b5-11ea-aa58-42010a14004c","6119de9e-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","6119c210-52b5-11ea-aa58-42010a14004c","6119d0d4-52b5-11ea-aa58-42010a14004c","6119de9e-52b5-11ea-aa58-42010a14004c","6119ec90-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","611b67be-52b5-11ea-aa58-42010a14004c","611a89c0-52b5-11ea-aa58-42010a14004c","611b4b76-52b5-11ea-aa58-42010a14004c","611a9884-52b5-11ea-aa58-42010a14004c","611ab4cc-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611ad29a-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611af072-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611b0f3a-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611b2e48-52b5-11ea-aa58-42010a14004c","611b3cd0-52b5-11ea-aa58-42010a14004c","611b4b76-52b5-11ea-aa58-42010a14004c","611b67be-52b5-11ea-aa58-42010a14004c","611b774a-52b5-11ea-aa58-42010a14004c","611bf1f2-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611bd582-52b5-11ea-aa58-42010a14004c","611be46e-52b5-11ea-aa58-42010a14004c","611bf1f2-52b5-11ea-aa58-42010a14004c","611bff76-52b5-11ea-aa58-42010a14004c","611c0ee4-52b5-11ea-aa58-42010a14004c","611c1ec0-52b5-11ea-aa58-42010a14004c","611c2c94-52b5-11ea-aa58-42010a14004c","611c674a-52b5-11ea-aa58-42010a14004c","611c3acc-52b5-11ea-aa58-42010a14004c","611c674a-52b5-11ea-aa58-42010a14004c","611c56c4-52b5-11ea-aa58-42010a14004c","611c674a-52b5-11ea-aa58-42010a14004c","611c75dc-52b5-11ea-aa58-42010a14004c"],"label":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"edges":{"arrows":"to"},"layout":{"hierarchical":{"enabled":true,"levelSeparation":500,"nodeSpacing":200,"direction":"RL"}},"groups":{"useDefaultGroups":true,"none":{"color":{"border":"black","background":"white"}}}},"groups":["none"],"width":"100%","height":"400px","idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="train-the-super-learner-on-the-machine-learning-task" class="section level3 unnumbered">
<h3>3. Train the Super Learner on the machine learning task</h3>
<p>The Super Learner algorithm fits a metalearner on the validation-set
predictions in a cross-validated manner, thereby avoiding overfitting.</p>
<p>Now we are ready to <strong>“train”</strong> our Super Learner on our <code>sl3_task</code> object,
<code>washb_task</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">sl_fit &lt;-<span class="st"> </span>sl<span class="op">$</span><span class="kw">train</span>(washb_task)</a></code></pre></div>
</div>
<div id="obtain-predicted-values" class="section level3 unnumbered">
<h3>4. Obtain predicted values</h3>
<p>Now that we have fit the Super Learner, we are ready to calculate the predicted
outcome for each subject.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co"># we did it! now we have super learner predictions</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">sl_preds &lt;-<span class="st"> </span>sl_fit<span class="op">$</span><span class="kw">predict</span>()</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="kw">head</span>(sl_preds)</a></code></pre></div>
<pre><code>[1] -0.6523636 -0.7544717 -0.6474541 -0.6446933 -0.6146023 -0.6711815</code></pre>
<!--
Below we visualize the observed versus predicted values. 

For fun, we will also
include the cross-validated predictions from most popular learner on the block, 
main terms linear regression. 



```r
df_plot <- data.frame(Observed = washb_data$whz, 
                      Predicted = sl_preds,
                      count = c(1:nrow(washb_data)))
                      
df_plot_melted <- melt(df_plot, 
                       id.vars = "count", 
                       measure.vars = c("Observed", "Predicted"))
```

```
Warning in melt(df_plot, id.vars = "count", measure.vars = c("Observed", :
The melt generic in data.table has been passed a data.frame and will attempt
to redirect to the relevant reshape2 method; please note that reshape2 is
deprecated, and this redirection is now deprecated as well. To continue using
melt methods from reshape2 while both libraries are attached, e.g. melt.list,
you can prepend the namespace like reshape2::melt(df_plot). In the next version,
this warning will become an error.
```

```r
ggplot(df_plot_melted, aes(value, count, color = variable)) + geom_point() 
```

<img src="csp2020_workshop_files/figure-html/plot-predvobs-woohoo-1.png" width="    extwidth" style="display: block; margin: auto;" />
-->
<p>We can also obtain a summary of the results.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">sl_fit<span class="op">$</span><span class="kw">print</span>()</a></code></pre></div>
<pre><code>[1] &quot;SuperLearner:&quot;
List of 2
 $ : chr &quot;Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)&quot;
 $ : chr &quot;Stack&quot;
[1] &quot;Lrnr_solnp_TRUE_TRUE_FALSE_1e-05&quot;
$pars
 [1] 4.511457e-04 5.429895e-05 2.681437e-04 2.159456e-04 2.365750e-01
 [6] 2.865736e-01 5.429895e-05 2.068102e-01 2.683692e-01 6.281731e-04

$convergence
[1] 0

$values
[1] 1.019894 1.010056 1.010052

$lagrange
            [,1]
[1,] -0.04757562

$hessian
           [,1]        [,2]        [,3]        [,4]        [,5]       [,6]
 [1,] 1.0152895  0.14388308  0.14821560  0.10385025  0.20829583 0.44949595
 [2,] 0.1438831  0.74153223  0.03783959  0.07616966  0.01986060 0.10345374
 [3,] 0.1482156  0.03783959  0.85066117 -0.05088250  0.07161435 0.34304832
 [4,] 0.1038503  0.07616966 -0.05088250  0.99969220  0.12028887 0.39190710
 [5,] 0.2082958  0.01986060  0.07161435  0.12028887  0.42583969 0.22573063
 [6,] 0.4494960  0.10345374  0.34304832  0.39190710  0.22573063 0.92137554
 [7,] 0.1438831 -0.25846777  0.03783959  0.07616966  0.01986060 0.10345374
 [8,] 0.3660411  0.08596861  0.25304763  0.30191861  0.17351174 0.05999243
 [9,] 0.4016979  0.10337452  0.29180607  0.33820171 -0.01391233 0.09706006
[10,] 0.1652215  0.04930684  0.04346422  0.09449764  0.48218762 0.10206159
             [,7]       [,8]        [,9]      [,10]
 [1,]  0.14388308 0.36604107  0.40169793 0.16522152
 [2,] -0.25846777 0.08596861  0.10337452 0.04930684
 [3,]  0.03783959 0.25304763  0.29180607 0.04346422
 [4,]  0.07616966 0.30191861  0.33820171 0.09449764
 [5,]  0.01986060 0.17351174 -0.01391233 0.48218762
 [6,]  0.10345374 0.05999243  0.09706006 0.10206159
 [7,]  0.74153223 0.08596861  0.10337452 0.04930684
 [8,]  0.08596861 1.12846930  0.16174037 0.10643025
 [9,]  0.10337452 0.16174037  1.12459751 0.27567059
[10,]  0.04930684 0.10643025  0.27567059 0.75154702

$ineqx0
NULL

$nfuneval
[1] 198

$outer.iter
[1] 2

$elapsed
Time difference of 0.05542707 secs

$vscale
 [1] 1.010056 0.000010 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000
 [9] 1.000000 1.000000 1.000000 1.000000

$coefficients
                          Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glm_TRUE 
                                                                            0.0004514133 
                              Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_mean 
                                                                            0.0000000000 
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glmnet_NULL_deviance_10_0_100_TRUE 
                                                                            0.0000000000 
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glmnet_NULL_deviance_10_1_100_TRUE 
                                                                            0.0000000000 
                Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_xgboost_20_1_4_0.1 
                                                                            0.2367152706 
                                                                     Stack_Lrnr_glm_TRUE 
                                                                            0.2867435894 
                                                                         Stack_Lrnr_mean 
                                                                            0.0000000000 
                                           Stack_Lrnr_glmnet_NULL_deviance_10_0_100_TRUE 
                                                                            0.2069328362 
                                           Stack_Lrnr_glmnet_NULL_deviance_10_1_100_TRUE 
                                                                            0.2685283448 
                                                           Stack_Lrnr_xgboost_20_1_4_0.1 
                                                                            0.0006285457 

$training_offset
[1] FALSE

$name
[1] &quot;solnp&quot;

[1] &quot;Cross-validated risk (MSE, squared error loss):&quot;
                                                                                     learner
 1:                           Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glm_TRUE
 2:                               Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_mean
 3: Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glmnet_NULL_deviance_10_0_100_TRUE
 4: Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glmnet_NULL_deviance_10_1_100_TRUE
 5:                 Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_xgboost_20_1_4_0.1
 6:                                                                      Stack_Lrnr_glm_TRUE
 7:                                                                          Stack_Lrnr_mean
 8:                                            Stack_Lrnr_glmnet_NULL_deviance_10_0_100_TRUE
 9:                                            Stack_Lrnr_glmnet_NULL_deviance_10_1_100_TRUE
10:                                                            Stack_Lrnr_xgboost_20_1_4_0.1
11:                                                                             SuperLearner
    coefficients mean_risk    SE_risk    fold_SD fold_min_risk fold_max_risk
 1: 0.0004514133  1.035485 0.02446142 0.06008226     0.9352596      1.119394
 2: 0.0000000000  1.065401 0.02503198 0.05999366     0.9689145      1.143488
 3: 0.0000000000  1.035487 0.02446129 0.06007150     0.9354655      1.119066
 4: 0.0000000000  1.035529 0.02445891 0.06023224     0.9352523      1.119315
 5: 0.2367152706  1.044729 0.02405570 0.06265341     0.9211017      1.117049
 6: 0.2867435894  1.018949 0.02372195 0.05817436     0.9095780      1.088981
 7: 0.0000000000  1.065401 0.02503198 0.05999366     0.9689145      1.143488
 8: 0.2069328362  1.014162 0.02361212 0.05623562     0.9186546      1.093245
 9: 0.2685283448  1.012601 0.02347836 0.05663693     0.9192244      1.094977
10: 0.0006285457  1.035503 0.02371762 0.06206027     0.9341196      1.119005
11:           NA  1.010064 0.02345310 0.05801567     0.9054041      1.087511</code></pre>
</div>
</div>
<div id="cross-validated-super-learner" class="section level2">
<h2><span class="header-section-number">3.5</span> Cross-validated Super Learner</h2>
<p>We can cross-validate the Super Learner to see how well the Super Learner
performs on unseen data, and obtain an estimate of the cross-validated risk of
the Super Learner.</p>
<p>This estimation procedure requires an “external” layer of cross-validation,
also called nested cross-validation, which involves setting aside a separate
holdout sample that we don’t use to fit the Super Learner. This
external cross validation procedure may also incorporate 10 folds, which is the
default in <code>sl3</code>. However, we will incorporate 2 outer/external folds of
cross-validation for computational efficiency.</p>
<p>We also need to specify a loss function to evaluate Super Learner.
Documentation for the available loss functions can be found in the <a href="https://tlverse.org/sl3/reference/loss_functions.html"><code>sl3</code> Loss
Function Reference</a>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">washb_task_new &lt;-<span class="st"> </span><span class="kw">make_sl3_Task</span>(</a>
<a class="sourceLine" id="cb33-2" data-line-number="2">  <span class="dt">data =</span> washb_data,</a>
<a class="sourceLine" id="cb33-3" data-line-number="3">  <span class="dt">covariates =</span> covars,</a>
<a class="sourceLine" id="cb33-4" data-line-number="4">  <span class="dt">outcome =</span> outcome,</a>
<a class="sourceLine" id="cb33-5" data-line-number="5">  <span class="dt">folds =</span> <span class="kw">make_folds</span>(washb_data, <span class="dt">fold_fun =</span> folds_vfold, <span class="dt">V =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">)</a></code></pre></div>
<pre><code>Warning in process_data(data, nodes, column_names = column_names, flag = flag, :
Missing covariate data detected: imputing covariates.</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">CVsl &lt;-<span class="st"> </span><span class="kw">CV_lrnr_sl</span>(sl_fit, washb_task_new, loss_squared_error)</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">CVsl <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="st">  </span>kableExtra<span class="op">:::</span><span class="kw">kable_styling</span>(<span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="st">  </span><span class="kw">scroll_box</span>(<span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;300px&quot;</span>)</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
learner
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
coefficients
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
mean_risk
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
SE_risk
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
fold_SD
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
fold_min_risk
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
fold_max_risk
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glm_TRUE
</td>
<td style="text-align:right;">
0.1123
</td>
<td style="text-align:right;">
1.0354
</td>
<td style="text-align:right;">
0.0245
</td>
<td style="text-align:right;">
0.0538
</td>
<td style="text-align:right;">
0.9973
</td>
<td style="text-align:right;">
1.0734
</td>
</tr>
<tr>
<td style="text-align:left;">
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_mean
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
1.0650
</td>
<td style="text-align:right;">
0.0250
</td>
<td style="text-align:right;">
0.0431
</td>
<td style="text-align:right;">
1.0345
</td>
<td style="text-align:right;">
1.0955
</td>
</tr>
<tr>
<td style="text-align:left;">
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glmnet_NULL_deviance_10_0_100_TRUE
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
1.0356
</td>
<td style="text-align:right;">
0.0245
</td>
<td style="text-align:right;">
0.0526
</td>
<td style="text-align:right;">
0.9984
</td>
<td style="text-align:right;">
1.0728
</td>
</tr>
<tr>
<td style="text-align:left;">
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_glmnet_NULL_deviance_10_1_100_TRUE
</td>
<td style="text-align:right;">
0.0347
</td>
<td style="text-align:right;">
1.0355
</td>
<td style="text-align:right;">
0.0245
</td>
<td style="text-align:right;">
0.0529
</td>
<td style="text-align:right;">
0.9981
</td>
<td style="text-align:right;">
1.0729
</td>
</tr>
<tr>
<td style="text-align:left;">
Pipeline(Lrnr_screener_randomForest_5_20-&gt;Stack)_Lrnr_xgboost_20_1_4_0.1
</td>
<td style="text-align:right;">
0.0419
</td>
<td style="text-align:right;">
1.0607
</td>
<td style="text-align:right;">
0.0242
</td>
<td style="text-align:right;">
0.0355
</td>
<td style="text-align:right;">
1.0356
</td>
<td style="text-align:right;">
1.0858
</td>
</tr>
<tr>
<td style="text-align:left;">
Stack_Lrnr_glm_TRUE
</td>
<td style="text-align:right;">
0.2048
</td>
<td style="text-align:right;">
1.0336
</td>
<td style="text-align:right;">
0.0240
</td>
<td style="text-align:right;">
0.0487
</td>
<td style="text-align:right;">
0.9991
</td>
<td style="text-align:right;">
1.0681
</td>
</tr>
<tr>
<td style="text-align:left;">
Stack_Lrnr_mean
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
1.0650
</td>
<td style="text-align:right;">
0.0250
</td>
<td style="text-align:right;">
0.0431
</td>
<td style="text-align:right;">
1.0345
</td>
<td style="text-align:right;">
1.0955
</td>
</tr>
<tr>
<td style="text-align:left;">
Stack_Lrnr_glmnet_NULL_deviance_10_0_100_TRUE
</td>
<td style="text-align:right;">
0.0570
</td>
<td style="text-align:right;">
1.0228
</td>
<td style="text-align:right;">
0.0239
</td>
<td style="text-align:right;">
0.0432
</td>
<td style="text-align:right;">
0.9923
</td>
<td style="text-align:right;">
1.0533
</td>
</tr>
<tr>
<td style="text-align:left;">
Stack_Lrnr_glmnet_NULL_deviance_10_1_100_TRUE
</td>
<td style="text-align:right;">
0.4287
</td>
<td style="text-align:right;">
1.0193
</td>
<td style="text-align:right;">
0.0238
</td>
<td style="text-align:right;">
0.0413
</td>
<td style="text-align:right;">
0.9901
</td>
<td style="text-align:right;">
1.0485
</td>
</tr>
<tr>
<td style="text-align:left;">
Stack_Lrnr_xgboost_20_1_4_0.1
</td>
<td style="text-align:right;">
0.1204
</td>
<td style="text-align:right;">
1.0416
</td>
<td style="text-align:right;">
0.0235
</td>
<td style="text-align:right;">
0.0466
</td>
<td style="text-align:right;">
1.0087
</td>
<td style="text-align:right;">
1.0745
</td>
</tr>
<tr>
<td style="text-align:left;">
SuperLearner
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1.0160
</td>
<td style="text-align:right;">
0.0236
</td>
<td style="text-align:right;">
0.0447
</td>
<td style="text-align:right;">
0.9844
</td>
<td style="text-align:right;">
1.0477
</td>
</tr>
</tbody>
</table>
</div>
<!-- Explain summary!!!! -->
</div>
<div id="variable-importance-measures-with-sl3" class="section level2">
<h2><span class="header-section-number">3.6</span> Variable Importance Measures with <code>sl3</code></h2>
<p>Variable importance can be interesting and informative. It can also be
contradictory and confusing. Nevertheless, we like it, and so do
collaborators, so we created a variable importance function in <code>sl3</code>! The <code>sl3</code>
<code>varimp</code> function returns a table with variables listed in decreasing order of
importance (i.e. most important on the first row).</p>
<p>The measure of importance in <code>sl3</code> is based on a risk difference between the
learner fit with a permuted covariate and the learner fit with the true
covariate, across all covariates. In this manner, the larger the risk
difference, the more important the variable is in the prediction.</p>
<p>Let’s explore the <code>sl3</code> variable importance measurements for the <code>washb</code> data.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">washb_varimp &lt;-<span class="st"> </span><span class="kw">varimp</span>(sl_fit, loss_squared_error)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">washb_varimp <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="st">  </span>kableExtra<span class="op">:::</span><span class="kw">kable_styling</span>(<span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-5" data-line-number="5"><span class="st">  </span><span class="kw">scroll_box</span>(<span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;300px&quot;</span>)</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
X
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
risk_diff
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
aged
</td>
<td style="text-align:right;">
0.0335
</td>
</tr>
<tr>
<td style="text-align:left;">
momedu
</td>
<td style="text-align:right;">
0.0068
</td>
</tr>
<tr>
<td style="text-align:left;">
momheight
</td>
<td style="text-align:right;">
0.0051
</td>
</tr>
<tr>
<td style="text-align:left;">
tr
</td>
<td style="text-align:right;">
0.0037
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_refrig
</td>
<td style="text-align:right;">
0.0028
</td>
</tr>
<tr>
<td style="text-align:left;">
month
</td>
<td style="text-align:right;">
0.0027
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_chair
</td>
<td style="text-align:right;">
0.0023
</td>
</tr>
<tr>
<td style="text-align:left;">
Nlt18
</td>
<td style="text-align:right;">
0.0020
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_table
</td>
<td style="text-align:right;">
0.0018
</td>
</tr>
<tr>
<td style="text-align:left;">
elec
</td>
<td style="text-align:right;">
0.0018
</td>
</tr>
<tr>
<td style="text-align:left;">
floor
</td>
<td style="text-align:right;">
0.0015
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_wardrobe
</td>
<td style="text-align:right;">
0.0008
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_mobile
</td>
<td style="text-align:right;">
0.0007
</td>
</tr>
<tr>
<td style="text-align:left;">
delta_momheight
</td>
<td style="text-align:right;">
0.0007
</td>
</tr>
<tr>
<td style="text-align:left;">
hfiacat
</td>
<td style="text-align:right;">
0.0006
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_chouki
</td>
<td style="text-align:right;">
0.0005
</td>
</tr>
<tr>
<td style="text-align:left;">
walls
</td>
<td style="text-align:right;">
0.0004
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_sewmach
</td>
<td style="text-align:right;">
0.0004
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_moto
</td>
<td style="text-align:right;">
0.0003
</td>
</tr>
<tr>
<td style="text-align:left;">
momage
</td>
<td style="text-align:right;">
0.0000
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_khat
</td>
<td style="text-align:right;">
-0.0001
</td>
</tr>
<tr>
<td style="text-align:left;">
roof
</td>
<td style="text-align:right;">
-0.0001
</td>
</tr>
<tr>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
-0.0001
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_bike
</td>
<td style="text-align:right;">
-0.0002
</td>
</tr>
<tr>
<td style="text-align:left;">
asset_tv
</td>
<td style="text-align:right;">
-0.0002
</td>
</tr>
<tr>
<td style="text-align:left;">
delta_momage
</td>
<td style="text-align:right;">
-0.0003
</td>
</tr>
<tr>
<td style="text-align:left;">
Ncomp
</td>
<td style="text-align:right;">
-0.0004
</td>
</tr>
<tr>
<td style="text-align:left;">
fracode
</td>
<td style="text-align:right;">
-0.0004
</td>
</tr>
<tr>
<td style="text-align:left;">
watmin
</td>
<td style="text-align:right;">
-0.0009
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="exercises" class="section level2">
<h2><span class="header-section-number">3.7</span> Exercises</h2>
<div id="sl3ex1" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Predicting Myocardial Infarction with <code>sl3</code></h3>
<p>Follow the steps below to predict myocardial infarction (<code>mi</code>) using the
available covariate data. We thank Prof. David Benkeser at Emory University for
making the this Cardiovascular Health Study (CHS) data accessible.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co"># load the data set</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2">db_data &lt;-</a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="st"> </span><span class="kw">url</span>(<span class="st">&quot;https://raw.githubusercontent.com/benkeser/sllecture/master/chspred.csv&quot;</span>)</a>
<a class="sourceLine" id="cb37-4" data-line-number="4">chspred &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> db_data, <span class="dt">col_names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="co"># take a quick peek</span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="kw">head</span>(chspred) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-7" data-line-number="7"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-8" data-line-number="8"><span class="st">  </span>kableExtra<span class="op">:::</span><span class="kw">kable_styling</span>(<span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-9" data-line-number="9"><span class="st">  </span><span class="kw">scroll_box</span>(<span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;300px&quot;</span>)</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
waist
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
alcoh
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
hdl
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
beta
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
smoke
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
ace
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
ldl
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
bmi
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
aspirin
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
gend
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
age
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
estrgn
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
glu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
ins
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
cysgfr
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
dm
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
fetuina
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
whr
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
hsed
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
race
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
logcystat
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
logtrig
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
logcrp
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
logcre
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
health
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
logkcal
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
sysbp
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;position: sticky; top:0; background-color: #FFFFFF;">
mi
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
110.1642
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
66.4974
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
114.2162
</td>
<td style="text-align:right;">
27.9975
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
73.5179
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
159.9314
</td>
<td style="text-align:right;">
70.3343
</td>
<td style="text-align:right;">
75.0078
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1752
</td>
<td style="text-align:right;">
1.1690
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.3420
</td>
<td style="text-align:right;">
5.4063
</td>
<td style="text-align:right;">
2.0126
</td>
<td style="text-align:right;">
-0.6739
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4.3926
</td>
<td style="text-align:right;">
177.1345
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
89.9763
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
50.0652
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
103.7766
</td>
<td style="text-align:right;">
20.8931
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
61.7723
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
153.3888
</td>
<td style="text-align:right;">
33.9695
</td>
<td style="text-align:right;">
82.7433
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.5717
</td>
<td style="text-align:right;">
0.9011
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
-0.0847
</td>
<td style="text-align:right;">
4.8592
</td>
<td style="text-align:right;">
3.2933
</td>
<td style="text-align:right;">
-0.5551
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6.2071
</td>
<td style="text-align:right;">
136.3742
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
106.1941
</td>
<td style="text-align:right;">
8.4174
</td>
<td style="text-align:right;">
40.5059
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
165.7158
</td>
<td style="text-align:right;">
28.4554
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
72.9312
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
121.7145
</td>
<td style="text-align:right;">
-17.3017
</td>
<td style="text-align:right;">
74.6989
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.3517
</td>
<td style="text-align:right;">
1.1797
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
-0.4451
</td>
<td style="text-align:right;">
4.5088
</td>
<td style="text-align:right;">
0.3013
</td>
<td style="text-align:right;">
-0.0115
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6.7320
</td>
<td style="text-align:right;">
135.1993
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
90.0566
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
36.1750
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
45.2035
</td>
<td style="text-align:right;">
23.9608
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
79.1191
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
53.9691
</td>
<td style="text-align:right;">
11.7315
</td>
<td style="text-align:right;">
95.7823
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.5439
</td>
<td style="text-align:right;">
1.1360
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
-0.4807
</td>
<td style="text-align:right;">
5.1832
</td>
<td style="text-align:right;">
3.0243
</td>
<td style="text-align:right;">
-0.5751
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7.3972
</td>
<td style="text-align:right;">
139.0182
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
78.6143
</td>
<td style="text-align:right;">
2.9790
</td>
<td style="text-align:right;">
71.0642
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
131.3121
</td>
<td style="text-align:right;">
10.9656
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
69.0179
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
94.3153
</td>
<td style="text-align:right;">
9.7112
</td>
<td style="text-align:right;">
72.7109
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.4916
</td>
<td style="text-align:right;">
1.1028
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.3121
</td>
<td style="text-align:right;">
4.2190
</td>
<td style="text-align:right;">
-0.7057
</td>
<td style="text-align:right;">
0.0053
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8.2779
</td>
<td style="text-align:right;">
88.0470
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
91.6593
</td>
<td style="text-align:right;">
0.0000
</td>
<td style="text-align:right;">
59.4963
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
171.1872
</td>
<td style="text-align:right;">
29.1317
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
81.8346
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
212.9066
</td>
<td style="text-align:right;">
-28.2269
</td>
<td style="text-align:right;">
69.2184
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.4621
</td>
<td style="text-align:right;">
0.9529
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
-0.2872
</td>
<td style="text-align:right;">
5.1773
</td>
<td style="text-align:right;">
0.9705
</td>
<td style="text-align:right;">
0.2127
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5.9942
</td>
<td style="text-align:right;">
69.5943
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<ol style="list-style-type: decimal">
<li>Create an <code>sl3</code> task, setting myocardial infarction <code>mi</code> as the outcome and
using all available covariate data.</li>
<li>Make a library of seven relatively fast base learning algorithms (i.e., do
not consider BART or HAL). Customize hyperparameters for one of your
learners. Feel free to use learners from <code>sl3</code> or <code>SuperLearner</code>. You may
use the same base learning library that is presented above.</li>
<li>Incorporate feature selection with the <code>SuperLearner</code> screener <code>screen.corP</code>.</li>
<li>Fit the metalearning step with the default metalearner.</li>
<li>With the metalearner and base learners, make the Super Learner and train it
on the task.</li>
<li>Print your Super Learner fit by calling <code>print()</code> with <code>$</code>.</li>
<li>Cross-validate your Super Learner fit to see how well it performs on unseen
data. Specify <code>loss_squared_error</code> as the loss function to evaluate the
Super Learner.</li>
</ol>
</div>
<div id="sl3ex2" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Predicting Recurrent Ischemic Stroke in an RCT with <code>sl3</code></h3>
<p>For this exercise, we will work with a random sample of 5,000 patients who
participated in the International Stroke Trial (IST). This data is described in
<a href="https://tlverse.org/tlverse-handbook/data.html#ist">Chapter 3.2 of the <code>tlverse</code>
handbook</a>.</p>
<ol style="list-style-type: decimal">
<li>Train a Super Learner to predict recurrent stroke <code>DRSISC</code> with the available
covariate data (the 25 other variables). Of course, you can consider feature
selection in the machine learning algorithms. In this data, the outcome is
occasionally missing, so be sure to specify <code>drop_missing_outcome = TRUE</code>
when defining the task.</li>
<li>Use the SL-based predictions to calculate the area under the ROC curve (AUC).</li>
<li>Calculate the cross-validated AUC with cross-validated SL-based predictions.
If you would like to decrease the number of outer cross-validation folds,
then specify the task as described below for 5 outer folds.</li>
</ol>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">ist_data &lt;-<span class="st"> </span><span class="kw">data.table</span>(<span class="kw">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/tlverse/tlverse-handbook/master/data/ist_sample.csv&quot;</span>))</a>
<a class="sourceLine" id="cb38-2" data-line-number="2"></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="co"># number 3 help</span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4">ist_task_CVsl &lt;-<span class="st"> </span><span class="kw">make_sl3_Task</span>(</a>
<a class="sourceLine" id="cb38-5" data-line-number="5">  <span class="dt">data =</span> ist_data,</a>
<a class="sourceLine" id="cb38-6" data-line-number="6">  <span class="dt">outcome =</span> <span class="st">&quot;DRSISC&quot;</span>,</a>
<a class="sourceLine" id="cb38-7" data-line-number="7">  <span class="dt">covariates =</span> <span class="kw">colnames</span>(ist_data)[<span class="op">-</span><span class="kw">which</span>(<span class="kw">names</span>(ist_data) <span class="op">==</span><span class="st"> &quot;DRSISC&quot;</span>)],</a>
<a class="sourceLine" id="cb38-8" data-line-number="8">  <span class="dt">drop_missing_outcome =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb38-9" data-line-number="9">  <span class="dt">folds =</span> <span class="kw">make_folds</span>(</a>
<a class="sourceLine" id="cb38-10" data-line-number="10">    <span class="dt">n =</span> <span class="kw">sum</span>(<span class="op">!</span><span class="kw">is.na</span>(ist_data<span class="op">$</span>DRSISC)), </a>
<a class="sourceLine" id="cb38-11" data-line-number="11">    <span class="dt">fold_fun =</span> folds_vfold,</a>
<a class="sourceLine" id="cb38-12" data-line-number="12">    <span class="dt">V =</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb38-13" data-line-number="13">    )</a>
<a class="sourceLine" id="cb38-14" data-line-number="14">  )</a></code></pre></div>
</div>
</div>
<div id="concluding-remarks" class="section level2">
<h2><span class="header-section-number">3.8</span> Concluding Remarks</h2>
<ul>
<li><p>The general ensemble learning approach of Super Learner can be applied to a
diversity of estimation and prediction problems that can be defined by a loss
function.</p></li>
<li><p>We just discussed conditional mean estimation, outcome prediction and
variable importance. In future updates of the handbook, we will delve into
prediction of a conditional density, and the optimal individualized treatment
rule.</p></li>
<li><p>If we plug in the estimator returned by Super Learner into the target
parameter mapping, then we would end up with an estimator that has the same
bias as what we plugged in, and would not be asymptotically linear. It also
would not be a plug-in estimator or efficient.</p>
<ul>
<li>An asymptotically linear estimator is important to have, since
they converge to the estimand at <span class="math inline">\(\frac{1}{\sqrt{n}}\)</span> rate, and thereby permit
formal statistical inference (i.e. confidence intervals and <span class="math inline">\(p\)</span>-values).</li>
<li>Plug-in estimators of the estimand are desirable because they respect both
the local and global constraints of the statistical model (e.g., bounds), and
have they have better finite-sample properties.</li>
<li>An efficient estimator is optimal in the sense that it has the lowest
possible variance, and is thus the most precise. An estimator is efficient if
and only if is asymptotically linear with influence curve equal to the
canonical gradient. The canonical gradient is a mathematical object that is
specific to the target estimand, and it provides information on the level of
difficulty of the estimation problem. The canonical gradient is shown in the
chapters that follow. Practitioner’s do not need to know how to calculate a
canonical gradient in order to understand efficiency and use Targeted Maximum
Likelihood Estimation (TMLE). Metaphorically, you do not need to be Yoda in
order to be a Jedi.</li>
</ul></li>
<li><p>TMLE is a general strategy that succeeds in constructing efficient and
asymptotically linear plug-in estimators.</p></li>
<li><p>Super Learner is fantastic for pure prediction, and for obtaining an initial
estimate in the first step of TMLE, but we need the second step of TMLE to
have the desirable statistical properties mentioned above.</p></li>
<li><p>In the chapters that follow, we focus on the targeted maximum likelihood
estimator and the targeted minimum loss-based estimator, both referred to as
TMLE.</p></li>
</ul>
</div>
<div id="appendix" class="section level2">
<h2><span class="header-section-number">3.9</span> Appendix</h2>
<div id="exercise-1-solution" class="section level3">
<h3><span class="header-section-number">3.9.1</span> Exercise 1 Solution</h3>
<p>Here is a potential solution to the <a href="#sl3ex"><code>sl3</code> Exercise – Predicting Myocardial
Infarction with <code>sl3</code></a>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="co"># make task</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2">chspred_task &lt;-<span class="st"> </span><span class="kw">make_sl3_Task</span>(</a>
<a class="sourceLine" id="cb39-3" data-line-number="3">  <span class="dt">data =</span> chspred,</a>
<a class="sourceLine" id="cb39-4" data-line-number="4">  <span class="dt">covariates =</span> <span class="kw">head</span>(<span class="kw">colnames</span>(chspred), <span class="dv">-1</span>),</a>
<a class="sourceLine" id="cb39-5" data-line-number="5">  <span class="dt">outcome =</span> <span class="st">&quot;mi&quot;</span></a>
<a class="sourceLine" id="cb39-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb39-7" data-line-number="7"></a>
<a class="sourceLine" id="cb39-8" data-line-number="8"><span class="co"># make learners</span></a>
<a class="sourceLine" id="cb39-9" data-line-number="9">glm_learner &lt;-<span class="st"> </span>Lrnr_glm<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb39-10" data-line-number="10">lasso_learner &lt;-<span class="st"> </span>Lrnr_glmnet<span class="op">$</span><span class="kw">new</span>(<span class="dt">alpha =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb39-11" data-line-number="11">ridge_learner &lt;-<span class="st"> </span>Lrnr_glmnet<span class="op">$</span><span class="kw">new</span>(<span class="dt">alpha =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb39-12" data-line-number="12">enet_learner &lt;-<span class="st"> </span>Lrnr_glmnet<span class="op">$</span><span class="kw">new</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb39-13" data-line-number="13">curated_glm_learner &lt;-<span class="st"> </span>Lrnr_glm_fast<span class="op">$</span><span class="kw">new</span>(<span class="dt">formula =</span> <span class="st">&quot;mi ~ smoke + beta + waist&quot;</span>)</a>
<a class="sourceLine" id="cb39-14" data-line-number="14">mean_learner &lt;-<span class="st"> </span>Lrnr_mean<span class="op">$</span><span class="kw">new</span>() <span class="co"># That is one mean learner!</span></a>
<a class="sourceLine" id="cb39-15" data-line-number="15">glm_fast_learner &lt;-<span class="st"> </span>Lrnr_glm_fast<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb39-16" data-line-number="16">ranger_learner &lt;-<span class="st"> </span>Lrnr_ranger<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb39-17" data-line-number="17">svm_learner &lt;-<span class="st"> </span>Lrnr_svm<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb39-18" data-line-number="18">xgb_learner &lt;-<span class="st"> </span>Lrnr_xgboost<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb39-19" data-line-number="19">screen_cor &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_screener_corP)</a>
<a class="sourceLine" id="cb39-20" data-line-number="20">glm_pipeline &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Pipeline, screen_cor, glm_learner)</a>
<a class="sourceLine" id="cb39-21" data-line-number="21"></a>
<a class="sourceLine" id="cb39-22" data-line-number="22"><span class="co"># stack learners together</span></a>
<a class="sourceLine" id="cb39-23" data-line-number="23">stack &lt;-<span class="st"> </span><span class="kw">make_learner</span>(</a>
<a class="sourceLine" id="cb39-24" data-line-number="24">  Stack,</a>
<a class="sourceLine" id="cb39-25" data-line-number="25">  glm_pipeline, glm_learner,</a>
<a class="sourceLine" id="cb39-26" data-line-number="26">  lasso_learner, ridge_learner, enet_learner,</a>
<a class="sourceLine" id="cb39-27" data-line-number="27">  curated_glm_learner, mean_learner, glm_fast_learner,</a>
<a class="sourceLine" id="cb39-28" data-line-number="28">  ranger_learner, svm_learner, xgb_learner</a>
<a class="sourceLine" id="cb39-29" data-line-number="29">)</a>
<a class="sourceLine" id="cb39-30" data-line-number="30"></a>
<a class="sourceLine" id="cb39-31" data-line-number="31"><span class="co"># choose metalearner</span></a>
<a class="sourceLine" id="cb39-32" data-line-number="32">metalearner &lt;-<span class="st"> </span><span class="kw">make_learner</span>(Lrnr_nnls)</a>
<a class="sourceLine" id="cb39-33" data-line-number="33"></a>
<a class="sourceLine" id="cb39-34" data-line-number="34">sl &lt;-<span class="st"> </span>Lrnr_sl<span class="op">$</span><span class="kw">new</span>(</a>
<a class="sourceLine" id="cb39-35" data-line-number="35">  <span class="dt">learners =</span> stack,</a>
<a class="sourceLine" id="cb39-36" data-line-number="36">  <span class="dt">metalearner =</span> metalearner</a>
<a class="sourceLine" id="cb39-37" data-line-number="37">)</a>
<a class="sourceLine" id="cb39-38" data-line-number="38">sl_fit &lt;-<span class="st"> </span>sl<span class="op">$</span><span class="kw">train</span>(chspred_task)</a>
<a class="sourceLine" id="cb39-39" data-line-number="39">sl_fit<span class="op">$</span><span class="kw">print</span>()</a>
<a class="sourceLine" id="cb39-40" data-line-number="40"></a>
<a class="sourceLine" id="cb39-41" data-line-number="41">CVsl &lt;-<span class="st"> </span><span class="kw">CV_lrnr_sl</span>(sl_fit, chspred_task, loss_squared_error)</a>
<a class="sourceLine" id="cb39-42" data-line-number="42">CVsl</a></code></pre></div>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-breiman1996stacked">
<p>Breiman, Leo. 1996. “Stacked Regressions.” <em>Machine Learning</em> 24 (1). Springer: 49–64.</p>
</div>
<div id="ref-polley2010super">
<p>Polley, Eric C, and Mark J van der Laan. 2010. “Super Learner in Prediction.” <em>Bepress</em>. bepress.</p>
</div>
<div id="ref-vdl2003unified">
<p>van der Laan, Mark J, and Sandrine Dudoit. 2003. “Unified Cross-Validation Methodology for Selection Among Estimators and a General Cross-Validated Adaptive Epsilon-Net Estimator: Finite Sample Oracle Inequalities and Examples.” <em>Bepress</em>. bepress.</p>
</div>
<div id="ref-vdl2007super">
<p>van der Laan, Mark J, Eric C Polley, and Alan E Hubbard. 2007. “Super Learner.” <em>Statistical Applications in Genetics and Molecular Biology</em> 6 (1).</p>
</div>
<div id="ref-van2006oracle">
<p>van der Vaart, Aad W, Sandrine Dudoit, and Mark J van der Laan. 2006. “Oracle Inequalities for Multi-Fold Cross Validation.” <em>Statistics &amp; Decisions</em> 24 (3). Oldenbourg Wissenschaftsverlag: 351–71.</p>
</div>
<div id="ref-wolpert1992stacked">
<p>Wolpert, David H. 1992. “Stacked Generalization.” <em>Neural Networks</em> 5 (2). Elsevier: 241–59.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-tmle-framework.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tlverse/csp2020-workshop/edit/master/04-sl3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
